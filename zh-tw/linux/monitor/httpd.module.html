<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>100.2. Module</title><link rel="stylesheet" type="text/css" href="..//docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.76.1" /><meta name="keywords" content="&#10;bash,bunzip2,busybox,bzcat,bzcmp,bzdiff,bzegrep,bzexe,bzfgrep,bzgrep,bzip2,bzip2recover,bzless,bzmore,cat,chgrp,chmod,chown,chvt,cp,cpio,dash,date,dbus-cleanup-sockets,dbus-daemon,dbus-uuidgen,dd,df,dir,dmesg,dnsdomainname,domainname,dumpkeys,echo,ed,egrep,false,fgconsole,fgrep,fuser,fusermount,grep,gunzip,gzexe,gzip,hostname,ip,kbd_mode,kill,less,lessecho,lessfile,lesskey,lesspipe,ln,loadkeys,login,ls,lsmod,mkdir,mknod,mktemp,more,mount,mountpoint,mt,mt-gnu,mv,nano,nc,nc.openbsd,netcat,netstat,nisdomainname,ntfs-3g,ntfs-3g.probe,ntfs-3g.secaudit,ntfs-3g.usermap,open,openvt,pidof,ping,ping6,plymouth,ps,pwd,rbash,readlink,rm,rmdir,rnano,run-parts,sed,setfont,setupcon,sh,sh.distrib,sleep,static-sh,stty,su,sync,tailf,tar,tempfile,touch,true,ulockmgr_server,umount,uname,uncompress,unicode_start,vdir,which,ypdomainname,zcat,zcmp,zdiff,zegrep,zfgrep,zforce,zgrep,zless,zmore,znew,,/sbin/:,acpi_available,apm_available,apparmor_parser,badblocks,blkid,blockdev,bootlogd,cfdisk,crda,ctrlaltdel,debugfs,depmod,dhclient,dhclient3,dhclient-script,dmsetup,dosfsck,dosfslabel,dump,dumpe2fs,e2fsck,e2image,e2label,e2undo,ethtool,fdisk,findfs,fsck,fsck.cramfs,fsck.ext2,fsck.ext3,fsck.ext4,fsck.ext4dev,fsck.minix,fsck.msdos,fsck.nfs,fsck.vfat,fstab-decode,getty,halt,hdparm,hwclock,ifconfig,ifdown,ifquery,ifup,init,initctl,insmod,insserv,installkernel,ip,ip6tables,ip6tables-restore,ip6tables-save,ipmaddr,iptables,iptables-restore,iptables-save,iptunnel,isosize,iwconfig,iwevent,iwgetid,iwlist,iwpriv,iwspy,kbdrate,killall5,ldconfig,ldconfig.real,logsave,losetup,lsmod,MAKEDEV,mii-tool,mkdosfs,mke2fs,mkfs,mkfs.bfs,mkfs.cramfs,mkfs.ext2,mkfs.ext3,mkfs.ext4,mkfs.ext4dev,mkfs.minix,mkfs.msdos,mkfs.vfat,mkhomedir_helper,mkswap,modinfo,modprobe,mountall,mount.fuse,mount.nfs,mount.nfs4,mount.ntfs,mount.ntfs-3g,nameif,on_ac_power,pam_tally,parted,partprobe,pivot_root,plipconfig,plymouthd,pmap_dump,pmap_set,portmap,poweroff,rarp,raw,rdump,reboot,regdbdump,reload,resize2fs,restart,restore,rfkill,rmmod,route,rpc.statd,rrestore,rtacct,rtmon,runlevel,sfdisk,shadowconfig,showmount,shutdown,slattach,sm-notify,ss,start,startpar,start-stop-daemon,status,stop,sulogin,swapoff,swapon,switch_root,sysctl,tc,telinit,tune2fs,udevadm,udevd,umount.nfs,umount.nfs4,unix_chkpwd,unix_update,upstart-udev-bridge,ureadahead,wipefs,wpa_action,wpa_cli,wpa_supplicant&#10;&#9;&#9;&#9;, &#10;a2p,acyclic,addftinfo,addpart,afmtodit,animate,anytopnm,apg,apgbfm,apport-bug,apport-cli,apport-collect,apport-unpack,apropos,apt-cache,apt-cdrom,apt-config,apt-extracttemplates,apt-ftparchive,apt-get,aptitude,aptitude-create-state-bundle,aptitude-run-state-bundle,apt-key,apt-mark,apt-sortpkgs,arch,arping,asciitopgm,at,atktopbm,atq,atrm,awk,base64,basename,bashbug,batch,bc,bcomps,bconsole,bdftopcf,bdftops,bdftruncate,bioradtopgm,bmptopnm,bmptoppm,brushtopbm,bsd-mailx,bsd-write,byobu,byobu-config,byobu-export,byobu-janitor,byobu-launch,byobu-launcher,byobu-launcher-install,byobu-launcher-uninstall,byobu-reconnect-sockets,byobu-select-profile,byobu-select-session,byobu-status,byobu-status-detail,c2ph,cal,calendar,captoinfo,catchsegv,catman,cautious-launcher,ccomps,chage,chattr,chcon,check-bios-nx,check-language-support,chem,chfn,chkdupexe,chrt,chsh,circo,ckbcomp,ck-history,ck-launch-session,ck-list-sessions,cksum,clear,clear_console,cmp,cmuwmtopbm,codepage,col,colcrt,colrm,column,comm,compare,compose,composite,config_data,conjure,convert,corelist,cpan,cpan2dist,cpanp,cpanp-run-perl,cpp,cpp-4.4,createrepo,c_rehash,crontab,csplit,ctstat,curl,curlftpfs,cut,dbilogstrip,dbiprof,dbiproxy,dbmmanage,dbus-monitor,dbus-send,ddate,deallocvt,debconf,debconf-apt-progress,debconf-communicate,debconf-copydb,debconf-escape,debconf-set-selections,debconf-show,defoma,defoma-app,defoma-font,defoma-hints,defoma-id,defoma-psfont-installer,defoma-subst,defoma-user,delpart,dh_bash-completion,dh_installdefoma,dh_installxmlcatalogs,dh_pycentral,dh_pysupport,dialog,diff,diff3,diffimg,dig,dijkstra,dircolors,dirname,display,do-release-upgrade,dot,dot2gxl,dotlockfile,dotty,dpkg,dpkg-deb,dpkg-divert,dpkg-query,dpkg-split,dpkg-statoverride,dpkg-trigger,dprofpp,du,dumphint,dumpkeys,dvipdf,easy_install,easy_install-2.6,edit,editor,eject,enc2xs,encode_keychange,env,envsubst,eps2eps,epsffit,eqn,eqn2graph,ex,expand,expiry,expr,extractres,eyuvtoppm,factor,faillog,fallocate,fc-cache,fc-cat,fc-list,fc-match,fc-query,fc-scan,fdp,fiascotopnm,file,find,find2perl,findsmb,fitstopnm,fixdlsrps,fixfmps,fixmacps,fixproc,fixpsditps,fixpspps,fixscribeps,fixtpps,fixwfwps,fixwpps,fixwwps,flock,flow-capture,flow-cat,flow-dscan,flow-expire,flow-export,flow-fanout,flow-filter,flow-gen,flow-header,flow-import,flow-log2rrd,flow-mask,flow-merge,flow-nfilter,flow-print,flow-receive,flow-report,flow-rpt2rrd,flow-rptfmt,flow-send,flow-split,flow-stat,flow-tag,flow-xlate,fmt,fold,font2c,fontconfig-voodoo,fonttosfnt,fping,fping6,free,fribidi,from,fstopgm,ftp,funzip,g3topbm,gawk,gc,gdiffmk,gdk-pixbuf-query-loaders,gemtopbm,gemtopnm,gendiff,geqn,GET,getafm,getconf,getent,getkeycodes,getopt,gettext,gettext.sh,ghostscript,giftopnm,ginstall-info,gio-querymodules,git,git-receive-pack,git-shell,git-upload-archive,git-upload-pack,gmetric,gnokii,gnuplot,gnuplot-nox,gouldtoppm,gpasswd,gpg,gpgsplit,gpgv,gpg-zip,gpic,grap2graph,grn,grodvi,groff,groffer,grog,grolbp,grolj4,grops,grotty,groups,grub-bin2h,grub-editenv,grub-fstest,grub-mkelfimage,grub-mkfont,grub-mkimage,grub-mkisofs,grub-mkpasswd-pbkdf2,grub-mkrelpath,grub-mkrescue,grub-script-check,gs,gsbj,gsdj,gsdj500,gslj,gslp,gsnd,gstat,gtbl,gtk-query-immodules-2.0,gtk-update-icon-cache,gvcolor,gvimtutor,gvpack,gvpr,gxditview,gxl2dot,h2ph,h2xs,hd,head,HEAD,helpztags,hexdump,hipstopgm,host,hostid,hpftodit,htdbm,htdigest,htpasswd,i386,icontopbm,iconv,id,identify,igawk,ilbmtoppm,imgtoppm,import,includeres,indexer,indxbib,info,infobrowser,infocmp,infokey,infotocap,innochecksum,innotop,install,install-info,instmodsh,ionice,iostat,ipcmk,ipcrm,ipcs,ipmicmd,ipmilan,ipmish,ipmitool,ipmi_ui,iptables-xml,join,jpegtopnm,killall,kvm-ok,l4p-tmpl,landscape-sysinfo,last,lastb,lastlog,lcf,ldd,leaftoppm,lefty,less,lessecho,lessfile,lesskey,lesspipe,lexgrog,libnetcfg,line,link,linux32,linux64,linux-boot-prober,lispmtopgm,lkbib,lneato,lnstat,loadkeys,loadunimap,locale,localedef,locate,lockfile-check,lockfile-create,lockfile-remove,lockfile-touch,logger,logname,look,lookbib,lorder,lsattr,lsb_release,lscpu,lshw,lsof,lspci,lspgpot,lsusb,ltrace,lwp-download,lwp-dump,lwp-mirror,lwp-request,lwp-rget,lzcat,lzma,macptopbm,mail,Mail,mail-lock,mailq,mail-touchlock,mail-unlock,mailx,make,make-memtest86+-boot-floppy,make_method,man,mandb,manhole,manpath,mapscrn,mawk,mcookie,md5sum,md5sum.textutils,mdatopbm,memcached,mesg,mgrtopbm,mkfifo,mkfontdir,mkfontscale,mk_modmap,mktap,mlocate,mmroff,modifyrepo,mogrify,montage,motd+shell,mpstat,msql2mysql,mtr,mtvtoppm,munin-check,munin-cron,munindoc,mutt,mutt_dotlock,myisamchk,myisam_ftdump,myisamlog,myisampack,my_print_defaults,mysql,mysqlaccess,mysqladmin,mysqlanalyze,mysqlbinlog,mysqlbug,mysqlcheck,mysql_client_test,mysql_client_test_embedded,mysql_convert_table_format,mysqld_multi,mysqld_safe,mysqldump,mysqldumpslow,mysql_find_rows,mysql_fix_extensions,mysql_fix_privilege_tables,mysqlhotcopy,mysqlimport,mysql_install_db,mysqloptimize,mysqlrepair,mysqlreport,mysql_secure_installation,mysql_setpermission,mysqlshow,mysqlslap,mysqltest,mysqltest_embedded,mysql_tzinfo_to_sql,mysql_upgrade,mysql_waitpid,mysql_zap,mytop,namei,nano,nawk,ncal,ncat,ncftp,ncftp3,ncftpbatch,ncftpbookmarks,ncftpget,ncftpls,ncftpput,ncftpspooler,ncurses5-config,ncursesw5-config,ndiff,neato,neotoppm,neqn,net,netkit-ftp,net.samba3,net-snmp-config,netstat-nat,newaliases,newgrp,ngettext,nice,nl,nmap,nmblookup,nmblookup.samba3,nmon,nohup,nop,nroff,nslookup,nstat,nsupdate,od,oldfind,omshell,on_ac_power,openipmicmd,openipmish,openssl,openssl-vulnkey,os-prober,pager,palmtopnm,pamcut,pamdeinterlace,pamdice,pamfile,pamoil,pamstack,pamstretch,pamstretch-gen,paperconf,parsechangelog,partx,passwd,paste,patch,pathchk,pbmclean,pbmlife,pbmmake,pbmmask,pbmpage,pbmpscale,pbmreduce,pbmtext,pbmtextps,pbmto10x,pbmtoascii,pbmtoatk,pbmtobbnbg,pbmtocmuwm,pbmtoepsi,pbmtoepson,pbmtog3,pbmtogem,pbmtogo,pbmtoicon,pbmtolj,pbmtomacp,pbmtomda,pbmtomgr,pbmtonokia,pbmtopgm,pbmtopi3,pbmtoplot,pbmtoppa,pbmtopsg3,pbmtoptx,pbmtowbmp,pbmtox10bm,pbmtoxbm,pbmtoybm,pbmtozinc,pbmupc,pcimodules,pcretest,pcxtoppm,pdb,pdb2.6,pdb3,pdb3.1,pdf2dsc,pdf2ps,pdfopt,pdfroff,pear,peardev,pecl,peekfd,perl,perl5.10.1,perlbug,perldoc,perlivp,perlthanks,perror,pf2afm,pfbtopfa,pfbtops,pfc,pftp,pg,pgawk,pgmbentley,pgmcrater,pgmedge,pgmenhance,pgmhist,pgmkernel,pgmnoise,pgmnorm,pgmoil,pgmramp,pgmslice,pgmtexture,pgmtofs,pgmtolispm,pgmtopbm,pgmtoppm,pgrep,php,php5,pi1toppm,pi3topbm,pic,pic2graph,pico,piconv,pidstat,pinky,pip,pjtoppm,pkill,pl2pm,plog,pmap,pngtopnm,pnmalias,pnmarith,pnmcat,pnmcolormap,pnmcomp,pnmconvol,pnmcrop,pnmcut,pnmdepth,pnmenlarge,pnmfile,pnmflip,pnmgamma,pnmhisteq,pnmhistmap,pnmindex,pnminterp,pnminterp-gen,pnminvert,pnmmargin,pnmmontage,pnmnlfilt,pnmnoraw,pnmnorm,pnmpad,pnmpaste,pnmpsnr,pnmquant,pnmremap,pnmrotate,pnmscale,pnmscalefixed,pnmshear,pnmsmooth,pnmsplit,pnmtile,pnmtoddif,pnmtofiasco,pnmtofits,pnmtojpeg,pnmtopalm,pnmtoplainpnm,pnmtopng,pnmtops,pnmtorast,pnmtorle,pnmtosgi,pnmtosir,pnmtotiff,pnmtotiffcmyk,pnmtoxwd,pod2html,pod2latex,pod2man,pod2text,pod2usage,podchecker,podselect,poff,pon,POST,post-grohtml,ppm3d,ppmbrighten,ppmchange,ppmcie,ppmcolormask,ppmcolors,ppmdim,ppmdist,ppmdither,ppmfade,ppmflash,ppmforge,ppmhist,ppmlabel,ppmmake,ppmmix,ppmnorm,ppmntsc,ppmpat,ppmquant,ppmquantall,ppmqvga,ppmrainbow,ppmrelief,ppmshadow,ppmshift,ppmspread,ppmtoacad,ppmtobmp,ppmtoeyuv,ppmtogif,ppmtoicr,ppmtoilbm,ppmtojpeg,ppmtoleaf,ppmtolj,ppmtomap,ppmtomitsu,ppmtompeg,ppmtoneo,ppmtopcx,ppmtopgm,ppmtopi1,ppmtopict,ppmtopj,ppmtopuzz,ppmtorgb3,ppmtosixel,ppmtotga,ppmtouil,ppmtowinicon,ppmtoxpm,ppmtoyuv,ppmtoyuvsplit,ppmtv,pr,preconv,pre-grohtml,prename,print,printafm,printenv,printerbanner,printf,prove,prtstat,prune,ps2ascii,ps2epsi,ps2pdf,ps2pdf12,ps2pdf13,ps2pdf14,ps2pdfwr,ps2ps,ps2ps2,ps2txt,psbook,psed,psfaddtable,psfgettable,psfstriptable,psfxtable,psidtopgm,psmerge,psnup,psresize,psselect,pstopnm,pstops,pstree,pstree.x11,pstruct,ptar,ptardiff,ptx,pwdx,py3_compilefiles,pycentral,pyclean,pycompile,py_compilefiles,pydoc,pydoc2.6,pydoc3,pydoc3.1,pygettext,pygettext2.6,pygettext3,pygettext3.1,pyhtmlizer,python,python2,python2.6,python3,python3.1,pyversions,qrttoppm,rasttopnm,rawtopgm,rawtoppm,rcp,red,refer,rename,rename.ul,renice,replace,report-hw,reset,resolveip,resolve_stack_dump,rev,rgb3toppm,rgrep,rletopnm,rlogin,rmcp_ping,roff2dvi,roff2html,roff2pdf,roff2ps,roff2text,roff2x,routef,routel,rpcclient,rpcinfo,rpm,rpm2cpio,rpmbuild,rpmdb,rpmgraph,rpmquery,rpmsign,rpmverify,rrdcgi,rrdtool,rrdupdate,rsh,rsync,rtstat,runcon,run-mailcap,rview,rvim,s2p,sadf,sar,sar.sysstat,savelog,sbigtopgm,sccmap,scp,screen,screendump,screen-launcher,screen-profiles-status,script,scriptreplay,sdiff,search,searchd,see,select-editor,sendsms,sensible-browser,sensible-editor,sensible-pager,sensors,sensors-conf-convert,seq,service,setarch,setkeycodes,setleds,setlogcons,setmetamode,setpci,setsid,setterm,sftp,sg,sgitopnm,sha1sum,sha224sum,sha256sum,sha384sum,sha512sum,shasum,showchar,showconsolefont,showkey,shred,shuf,sirtopnm,skill,slabtop,sldtoppm,slogin,smbcacls,smbclient,smbcquotas,smbget,smbpasswd,smbspool,smbtar,smbtree,smime_keys,snice,snmpbulkget,snmpbulkwalk,snmpconf,snmpdelta,snmpdf,snmpget,snmpgetnext,snmpinform,snmpkey,snmpnetstat,snmpset,snmpstatus,snmptable,snmptest,snmptranslate,snmptrap,snmpusm,snmpvacm,snmpwalk,soelim,solterm,sort,spctoppm,spelldump,splain,split,splitfont,sputoppm,ssh,ssh-add,ssh-agent,ssh-argv0,ssh-copy-id,sshfs,ssh-keygen,ssh-keyscan,ssh-vulnkey,st4topgm,stat,strace,stream,sudo,sudoedit,sum,svn,svnadmin,svnauthz-validate,svndumpfilter,svnlook,svnmucc,svn-populate-node-origins-index,svnserve,svnsync,svnversion,tabs,tac,tail,tap2deb,tap2rpm,tapconvert,tasksel,taskset,tbl,tee,telnet,telnet.netkit,test,testparm,testparm.samba3,tfmtodit,tgatoppm,thinkjettopbm,tic,tifftopnm,time,tload,toe,top,touch,tput,tr,tracepath,tracepath6,traceroute6,traceroute6.iputils,traptoemail,tred,trial,troff,truncate,tset,tsort,tty,twistd,twopi,tzselect,ubuntu-bug,ubuntu-support-status,ucf,ucfq,ucfr,ucs2any,ul,unattended-upgrade,unattended-upgrades,unexpand,unflatten,unicode_stop,uniq,unlink,unlzma,unshare,unzip,unzipsfx,update-alternatives,updatedb,updatedb.mlocate,update-mime-database,update-mime-database.real,update-pciids,update-perl-sax-parsers,uptime,usb-devices,users,uuidgen,vi,view,vim,vim.basic,vimdiff,vim.tiny,vimtutor,vmstat,volname,w,w3m,w3mman,wall,watch,wbmptopbm,wc,webalizer,webazolver,wftopfa,wget,whatis,whereis,which,whiptail,who,whoami,winicontoppm,wpa_passphrase,w.procps,write,www-browser,X11,x86_64,x86_64-linux-gnu-cpp,x86_64-linux-gnu-cpp-4.4,xargs,xauth,xbmtopbm,ximtoppm,xpmtoppm,xsubpp,xtotroff,xvminitoppm,xwdtopnm,xxd,ybmtopbm,yes,yuvsplittoppm,yuvtoppm,zabbix_get,zdump,zeisstopnm,zipgrep,zipinfo,zsoelim,,/usr/sbin/:,a2dismod,a2dissite,a2enmod,a2ensite,aa-audit,aa-autodep,aa-complain,aa-decode,aa-enforce,aa-genprof,aa-logprof,aa-status,aa-unconfined,ab,accessdb,addgroup,add-shell,adduser,apache2,apache2ctl,apparmor_status,arp,arpd,atd,audit,autodep,bacula-console,bacula-fd,bandwidthd,bcrelay,biosdecode,brctl,bsmtp,btraceback,chat,check_forensic,checkgid,chgpasswd,chpasswd,chroot,ck-log-system-restart,ck-log-system-start,ck-log-system-stop,complain,console-kit-daemon,cpgr,cppw,cron,cytune,dbconfig-generate-include,dbconfig-load-include,defoma-reconfigure,delgroup,deluser,dmidecode,dpkg-divert,dpkg-preconfigure,dpkg-reconfigure,dpkg-statoverride,e2freefrag,enforce,ethtool,exicyclog,exigrep,exim,exim4,exim_checkaccess,exim_convert4r4,exim_dbmbuild,exim_dumpdb,exim_fixdb,exim_lock,eximstats,exim_tidydb,exinext,exipick,exiqgrep,exiqsumm,exiwhat,fancontrol,fdformat,filefrag,genprof,gmetad,gmond,gnokiid,groupadd,groupdel,groupmod,grpck,grpconv,grpunconv,grub-install,grub-mkconfig,grub-mkdevicemap,grub-probe,grub-reboot,grub-set-default,grub-setup,gss_clnt_send_err,gss_destroy_creds,htcacheclean,httxt2dbm,iconvconfig,install-info,install-sgmlcatalog,invoke-rc.d,ip6tables-apply,ipmievd,iptables-apply,irqbalance,isadump,isaset,laptop-detect,ldattach,libgraphviz4-config-update,locale-gen,login.radius,logprof,logresolve,logrotate,lsusb,make-ssl-cert,mgnokiidev,mkinitramfs,mkinitramfs-kpkg,mklost+found,munin-node,munin-node-configure,munin-run,mysqld,mysqlmanager,nagios3,nagios3stats,newusers,nfsstat,nologin,ntop,ntpd,ntpdate,ntpdate-debian,openntpd,openvpn,openvpn-vulnkey,ownership,pam-auth-update,pam_getenv,paperconfig,popcon-largest-unused,popularity-contest,pppconfig,pppd,pppdump,pppoeconf,pppoe-discovery,pppstats,pptpctrl,pptpd,pwck,pwconv,pwmconfig,pwunconv,radacct,radexample,radlogin,radstatus,ramsize,rdev,readprofile,remove-shell,rmail,rmt,rmt-dump,rmt-tar,rootflags,rotatelogs,rpcdebug,rpc.gssd,rpc.idmapd,rsmtp,rsyslogd,rtcwake,runq,safe_finger,sendmail,sensors-detect,service,setvesablank,snmpd,snmptrapd,spine,split-logfile,sshd,syslog2eximlog,tcpd,tcpdchk,tcpdmatch,tcpdump,try-from,tunelp,tzconfig,ufw,unconfined,update-alternatives,update-bootsystem-insserv,update-ca-certificates,update-catalog,update-exim4.conf,update-exim4.conf.template,update-exim4defaults,update-fonts-alias,update-fonts-dir,update-fonts-scale,update-gdkpixbuf-loaders,update-grub,update-grub2,update-gtk-immodules,update-icon-caches,update-inetd,update-info-dir,update-initramfs,update-locale,update-mime,update-pangox-aliases,update-passwd,update-python-modules,update-rc.d,update-rc.d-insserv,update-usbids,update-xmlcatalog,upgrade-from-grub-legacy,useradd,userdel,usermod,uuidd,validlocale,vcstime,vidmode,vigr,vipw,visudo,vpddecode,vsftpd,xl2tpd,zabbix_server,zic&#10;&#9;&#9;&#9;" /><link rel="home" href="../index.html" title="Netkiller Linux 手札" /><link rel="up" href="lamp.html" title="第 100 章 Apache httpd" /><link rel="prev" href="lamp.html" title="第 100 章 Apache httpd" /><link rel="next" href="lamp.referal.html" title="100.3. 設置Apache實現防盜連" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">100.2. Module</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="lamp.html">上一頁</a> </td><th width="60%" align="center">第 100 章 Apache httpd</th><td width="20%" align="right"> <a accesskey="n" href="lamp.referal.html">下一頁</a></td></tr></table><hr /></div><table xmlns="" width="100%" border="0"><tr><td align="left"><a href="http://netkiller.github.io/">Home</a> |
        <a href="http://netkiller.sourceforge.net/">Mirror</a> |
        <a href="/search.html">Search</a> |
        <a href="http://netkiller-github-com.iteye.com/">ITEYE 博客</a> |
        <a href="http://my.oschina.net/neochen/">OSChina 博客</a> |
        <a href="http://rline.blog.51cto.com/">51CTO 博客</a></td><td><div id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare"><a class="bds_fbook"></a><a class="bds_twi"></a><a class="bds_ms"></a><a class="bds_msn"></a><a class="bds_buzz"></a><a class="bds_linkedin"></a><a class="bds_deli"></a><a class="bds_qzone"></a><a class="bds_qq"></a><a class="bds_tqq"></a><a class="bds_tqf"></a><a class="bds_tsina"></a><a class="bds_baidu"></a><a class="bds_renren"></a><a class="bds_t163"></a><a class="bds_tfh"></a><a class="bds_douban"></a><a class="bds_hi"></a><a class="bds_tieba"></a><a class="bds_tsohu"></a><span class="bds_more"></span><a class="shareCount"></a></div><script type="text/javascript" id="bdshare_js" data="type=tools"></script><script type="text/javascript" id="bdshell_js"></script><script type="text/javascript">
	document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + new Date().getHours();
</script></td><td><form id="searchbox_008589143145807374698:f5uprauilyy" action="/search.html"><input type="hidden" name="cx" value="008589143145807374698:f5uprauilyy" /><input type="hidden" name="cof" value="FORID:11" /><input name="q" type="text" size="25" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(126, 157, 185); border-right-color: rgb(126, 157, 185); border-bottom-color: rgb(126, 157, 185); border-left-color: rgb(126, 157, 185); padding-top: 2px; padding-right: 2px; padding-bottom: 2px; padding-left: 2px; background-image: url(http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(255, 255, 255); background-position: 0% 50%; background-repeat: no-repeat no-repeat; " /><input type="submit" name="sa" value="Search" /><input name="siteurl" type="hidden" value="http://netkiller.sourceforge.net/" /></form><script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_008589143145807374698%3Af5uprauilyy"></script></td></tr></table><div class="section" title="100.2. Module"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="httpd.module"></a>100.2. Module</h2></div></div></div><pre class="screen">
模組的做用如下：
mod_access 	提供基于主機的訪問控制命令
mod_actions 能夠運行基于MIME類型的CGI腳本或HTTP請求方法
mod_alias 	能執行URL重定向服務
mod_asis 	使文檔能在沒有HTTP頭標的情況下被發送到客戶端
mod_auth 	支持使用存儲在文本檔案中的用戶名、口令實現認證
mod_auth_dbm 支持使用DBM檔案存儲基本HTTP認證
mod_auth_mysql 支持使用MySQL資料庫實現基本HTTP認證
mod_auth_anon 允許以匿名方式訪問需要認證的區域
mod_auth_external支持使用第三方認證
mod_autoindex 當缺少索引檔案時，自動生成動態目錄列表
mod_cern_meta 提供對元信息的支持
mod_cgi 	支持CGI
mod_dir 	能夠重定向任何對不包括尾部斜杠字元命令的請求
mod_env 	使你能夠將環境變數傳遞給CGI或SSI腳本
mod_expires 讓你確定Apache在伺服器響應請求時如何處理Expires
mod_headers 能夠操作HTTP應答頭標
mod_imap 	提供圖形映射支持
mod_include 使支持SSI
mod_info 	對伺服器配置提供了全面的描述
mod_log_agent 允許在單獨的日誌檔案中存儲用戶代理的信息
mod_log_config 支持記錄日誌
mod_log_referer 提供了將請求中的Referer頭標寫入日誌的功能
mod_mime 用來向客戶端提供有關文檔的元信息
mod_negotiation 提供了對內容協商的支持
mod_setenvif 使你能夠創建定製環境變數
mod_speling 使你能夠處理含有拼寫錯誤或大小寫錯誤的URL請求
mod_status 	允許管理員通過WEB管理Apache
mod_unique_id 為每個請求提供在非常特殊的條件下保證是唯一的標識
	</pre><p>常用模組</p><pre class="screen">
LoadModule dir_module         modules/mod_dir.so
LoadModule mime_module        modules/mod_mime.so
LoadModule expires_module     modules/mod_expires.so
LoadModule config_log_module  modules/mod_log_config.so
LoadModule alias_module       modules/mod_alias.so
LoadModule rewrite_module     modules/mod_rewrite.so
LoadModule access_module      modules/mod_access.so
LoadModule auth_module        modules/mod_auth.so
	</pre><div class="section" title="100.2.1. Output a list of modules compiled into the server."><div class="titlepage"><div><div><h3 class="title"><a id="idp13130160"></a>100.2.1. Output a list of modules compiled into the server. </h3></div></div></div><p>This will not list dynamically loaded modules included using the LoadModule directive.</p><pre class="screen">
[root@development bin]# httpd -l
Compiled in modules:
  core.c
  worker.c
  http_core.c
  mod_so.c
		</pre></div><div class="section" title="100.2.2. Core"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.core"></a>100.2.2. Core</h3></div></div></div><div class="section" title="100.2.2.1. Listen"><div class="titlepage"><div><div><h4 class="title"><a id="idp13132160"></a>100.2.2.1. Listen</h4></div></div></div><p>綁定多個IP</p><pre class="screen">
#Listen 80
Listen 192.168.3.40:80
Listen 192.168.4.40:80
Listen 192.168.5.40:80
			</pre></div><div class="section" title="100.2.2.2. Filesystem and Webspace"><div class="titlepage"><div><div><h4 class="title"><a id="idp13133552"></a>100.2.2.2. Filesystem and Webspace</h4></div></div></div><p>ref: http://httpd.apache.org/docs/2.2/en/sections.html</p><p>Filesystem Containers</p><pre class="screen">
			
&lt;Directory /var/web/dir1&gt;
	Options +Indexes
&lt;/Directory&gt;

&lt;Files private.html&gt;
	Order allow,deny
	Deny from all
&lt;/Files&gt;

&lt;Directory /var/web/dir1&gt;
	&lt;Files private.html&gt;
		Order allow,deny
		Deny from all
	&lt;/Files&gt;
&lt;/Directory&gt;
			
			</pre><p>Webspace Containers</p><pre class="screen">
			
&lt;LocationMatch ^/private&gt;
	Order Allow,Deny
	Deny from all
&lt;/LocationMatch&gt;
			
			</pre><p>Wildcards and Regular Expressions</p><pre class="screen">
			
A non-regex wildcard section that changes the configuration of all user directories could look as follows:

&lt;Directory /home/*/public_html&gt;
Options Indexes
&lt;/Directory&gt;
Using regex sections, we can deny access to many types of image files at once:

&lt;FilesMatch \.(?i:gif|jpe?g|png)$&gt;
Order allow,deny
Deny from all
&lt;/FilesMatch&gt;
			
			</pre><div class="section" title="100.2.2.2.1. Options"><div class="titlepage"><div><div><h5 class="title"><a id="options"></a>100.2.2.2.1. Options</h5></div></div></div><pre class="screen">
				
&lt;DirectoryMatch (/var/www/logs|/var/www/logs/*)&gt;
        Options FollowSymLinks MultiViews Indexes

        DirectoryIndex index.html

        AllowOverride AuthConfig
        Order Allow,Deny
        Allow From All

        AuthName "Logs Access"
        AuthType Basic
        AuthUserFile /etc/nagios3/htpasswd.users
        require valid-user
&lt;/DirectoryMatch&gt;
				
				</pre><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>None是禁止所有</p></li><li class="listitem"><p>Indexes 當沒有index.html 的時候列出目錄</p></li><li class="listitem"><p>FollowSymLinks 允許符號連接，可以通過符號連接跨越DocumentRoot</p></li><li class="listitem"><p>AllowOverride 定義是否允許各個目錄用目錄中的.htaccess覆蓋這裡設定的Options</p></li><li class="listitem"></li></ol></div></div></div><div class="section" title="100.2.2.3. Etag"><div class="titlepage"><div><div><h4 class="title"><a id="idp13142080"></a>100.2.2.3. Etag</h4></div></div></div><pre class="screen">
			
&lt;Directory /www&gt;
	&lt;Files ~ "\.(gif|jpe?g|png|html|css|js)$"&gt;
		FileETag INode MTime Size
	&lt;/Files&gt;
&lt;/Directory&gt;
			
			</pre></div><div class="section" title="100.2.2.4. 隱藏 Apache 版本信息"><div class="titlepage"><div><div><h4 class="title"><a id="idp13143104"></a>100.2.2.4. 隱藏 Apache 版本信息</h4></div></div></div><pre class="screen">
ServerTokens ProductOnly
ServerSignature Off
			</pre></div></div><div class="section" title="100.2.3. mpm"><div class="titlepage"><div><div><h3 class="title"><a id="mpm"></a>100.2.3. mpm</h3></div></div></div><div class="section" title="100.2.3.1. event"><div class="titlepage"><div><div><h4 class="title"><a id="idp13144752"></a>100.2.3.1. event</h4></div></div></div><p>ThreadLimit 需要自行添加</p><p>ServerLimit 需要自行添加</p><pre class="screen">
			
&lt;IfModule mpm_event_module&gt;
    ThreadLimit			256
    ServerLimit			4096
    StartServers             4
    MinSpareThreads         75
    MaxSpareThreads        250
    ThreadsPerChild        128
    MaxRequestWorkers      4096
    MaxConnectionsPerChild   0
&lt;/IfModule&gt;
			
			</pre></div><div class="section" title="100.2.3.2. worker"><div class="titlepage"><div><div><h4 class="title"><a id="httpd.worker"></a>100.2.3.2. worker</h4></div></div></div><p>worker</p><pre class="screen">
# Server-pool management (MPM specific)
Include conf/extra/httpd-mpm.conf
			</pre><p>conf/extra/httpd-mpm.conf</p><p>mpm_worker_module</p><pre class="screen">
			
&lt;IfModule mpm_worker_module&gt;
    ServerLimit         16
    ThreadLimit         128
    StartServers        8
    MaxClients          2048
    MinSpareThreads     64
    MaxSpareThreads     128
    ThreadsPerChild     128
    MaxRequestsPerChild 10000
&lt;/IfModule&gt;

&lt;IfModule mpm_worker_module&gt;
    ServerLimit         24
    ThreadLimit         128
    StartServers        8
    MaxClients          3072
    MinSpareThreads     64
    MaxSpareThreads     128
    ThreadsPerChild     128
    MaxRequestsPerChild 10000
&lt;/IfModule&gt;

&lt;IfModule mpm_worker_module&gt;
    ServerLimit         16
    ThreadLimit         256
    StartServers        8
    MaxClients          4096
    MinSpareThreads     64
    MaxSpareThreads     256
    ThreadsPerChild     256
    MaxRequestsPerChild 10000
&lt;/IfModule&gt;

			
			</pre><pre class="screen">
			
ServerLimit 預設是16，它決定系統最多啟動幾個httpd進程。
ThreadLimit 預設是64，
ThreadsPerChild* ServerLimit=系統支持的最大並發。
MaxClients&lt;ThreadsPerChild* ServerLimit，MaxClients如果大於400將被限制在400.
400只是理論最大並發，實際並發就是MaxClients的值。
理論並發有什麼用我不知道。


指令說明：
        StartServers：設置伺服器啟動時建立的子進程數量。因為子進程數量動態的取決於負載的輕重,所有一般沒有必要調整這個參數。
        ServerLimit：伺服器允許配置的進程數上限。只有在你需要將MaxClients和ThreadsPerChild設置成需要超過預設值16個子進程的時候才需要使用這個指令。不要將該指令的值設置的比MaxClients 和ThreadsPerChild需要的子進程數量高。修改此指令的值必須完全停止服務後再啟動才能生效，以restart方式重啟動將不會生效。
        ThreadLimit：設置每個子進程可配置的綫程數ThreadsPerChild上限,該指令的值應當和ThreadsPerChild可能達到的最大值保持一致。修改此指令的值必須完全停止服務後再啟動才能生效，以restart方式重啟動將不會生效。
        MaxClients：用於伺服客戶端請求的最大接入請求數量（最大綫程數）。任何超過MaxClients限制的請求都將進入等候隊列。預設值是"400"，16 (ServerLimit)乘以25(ThreadsPerChild)的結果。因此要增加MaxClients的時候，你必須同時增加 ServerLimit的值。筆者建議將初始值設為(以Mb為單位的最大物理內存/2),然後根據負載情況進行動態調整。比如一台4G內存的機器，那麼初始值就是4000/2=2000。
        MinSpareThreads：最小空閒綫程數,預設值是"75"。這個MPM將基于整個伺服器監視空閒綫程數。如果伺服器中總的空閒綫程數太少，子進程將產生新的空閒綫程。
        MaxSpareThreads：設置最大空閒綫程數。預設值是"250"。這個MPM將基于整個伺服器監視空閒綫程數。如果伺服器中總的空閒綫程數太多，子進程將殺死多餘的空閒綫程。MaxSpareThreads的取值範圍是有限制的。Apache將按照如下限制自動修正你設置的值：worker要求其大於等於 MinSpareThreads加上ThreadsPerChild的和。
        ThreadsPerChild：每個子進程建立的綫程數。預設值是25。子進程在啟動時建立這些綫程後就不再建立新的綫程了。每個子進程所擁有的所有線程的總數要足夠大，以便可以處理可能的請求高峰。
        MaxRequestsPerChild：設置每個子進程在其生存期內允許伺服的最大請求數量。到達MaxRequestsPerChild的限制後，子進程將會結束。如果MaxRequestsPerChild為"0"，子進程將永遠不會結束。將MaxRequestsPerChild設置成非零值有兩個好處：可以防止(偶然的)內存泄漏無限進行而耗盡內存；
給進程一個有限壽命，從而有助于當伺服器負載減輕的時候減少活動進程的數量。
如果設置為非零值，筆者建議設為10000-30000之間的一個值。
         公式：
         ThreadLimit &gt;= ThreadsPerChild
         MaxClients &lt;= ServerLimit * ThreadsPerChild 必須是ThreadsPerChild的倍數
         MaxSpareThreads &gt;= MinSpareThreads+ThreadsPerChild
			
			</pre></div></div><div class="section" title="100.2.4. Apache Log"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.log"></a>100.2.4. Apache Log</h3></div></div></div><div class="section" title="100.2.4.1. LogLevel"><div class="titlepage"><div><div><h4 class="title"><a id="idp13154656"></a>100.2.4.1. LogLevel</h4></div></div></div><p>日誌級別</p><p>語法：LogLevel level</p><pre class="screen">
可以選擇下列level，依照重要性降序排列：
emerg 　緊急(系統無法使用)
alert 　必須立即採取措施
crit 　	致命情況
error 　錯誤情況
warn 　	警告情況
notice 	一般重要情況
info 　 普通信息
debug 　調試信息
			</pre><pre class="screen">
LogLevel crit
			</pre></div><div class="section" title="100.2.4.2. LogFormat"><div class="titlepage"><div><div><h4 class="title"><a id="idp13156960"></a>100.2.4.2. LogFormat</h4></div></div></div><p>分割log日誌檔案</p><pre class="screen">
			
&lt;IfModule log_config_module&gt;
    #
    # The following directives define some format nicknames for use with
    # a CustomLog directive (see below).
    #
    #LogFormat "%h %l %u %t \"%r\" %&gt;s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %&gt;s %b \"%{Referer}i\" \"%{User-Agent}i\" %{email}C %{nickname}C" combined
    LogFormat "%h %l %u %t \"%r\" %&gt;s %b" common

    &lt;IfModule logio_module&gt;
      # You need to enable mod_logio.c to use %I and %O
      LogFormat "%h %l %u %t \"%r\" %&gt;s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
    &lt;/IfModule&gt;

    #
    # The location and format of the access logfile (Common Logfile Format).
    # If you do not define any access logfiles within a &lt;VirtualHost&gt;
    # container, they will be logged here.  Contrariwise, if you *do*
    # define per-&lt;VirtualHost&gt; access logfiles, transactions will be
    # logged therein and *not* in this file.
    #
    #CustomLog logs/access_log common

    #
    # If you prefer a logfile with access, agent, and referer information
    # (Combined Logfile Format) you can use the following directive.
    #
    CustomLog logs/access_log combined

    #CookieLog logs/cookie_log
&lt;/IfModule&gt;

			</pre></div><div class="section" title="100.2.4.3. Compressed"><div class="titlepage"><div><div><h4 class="title"><a id="idp13159472"></a>100.2.4.3. Compressed</h4></div></div></div><pre class="screen">
			
# compressed logs
$ CustomLog "|/usr/bin/gzip -c &gt;&gt; /var/log/access_log.gz" common
			
			</pre></div><div class="section" title="100.2.4.4. rotatelogs - Piped logging program to rotate Apache logs"><div class="titlepage"><div><div><h4 class="title"><a id="idp13160528"></a>100.2.4.4. rotatelogs - Piped logging program to rotate Apache logs</h4></div></div></div><p>rotatelogs是一個配合Apache管道日誌功能使用的簡單程序。舉例：</p><pre class="screen">
rotatelogs logfile [ rotationtime [ offset ]] | [ filesizeM ]

選項
logfile
它加上基準名就是日誌檔案名。如果logfile中包含’%'，則它會被視為用於的strftime(3)的格式字串；否則，它會被自動加上以秒為單位的.nnnnnnnnnn尾碼。這兩種格式都表示新的日誌開始使用的時間。
rotationtime
日誌檔案回捲的以秒為單位的間隔時間
offset
相對於UTC的時差的分鐘數。如果省略，則假定為0，並使用UTC時間。比如，要指定UTC時差為-5小時的地區的當地時間，則此參數應為-300。
filesizeM
指定回捲時以兆位元組為單位的尾碼字母M的檔案大小，而不是指定回捲時間或時差。

下列日誌檔案格式字串可以為所有的strftime(3)實現所支持，見各種擴展庫對應的strftime(3)的手冊。
%A 星期名全稱(本地的)
%a 3個字元的星期名(本地的)
%B 月份名的全稱(本地的)
%b 3個字元的月份名(本地的)
%c 日期和時間(本地的)
%d 2位數的一個月中的日期數
%H 2位數的小時數(24小時制)
%I 2位數的小時數(12小時制)
%j 3位數的一年中的日期數
%M 2位數的分鐘數
%m 2位數的月份數
%p am/pm 12小時制的上下午(本地的)
%S 2位數的秒數
%U 2位數的一年中的星期數(星期天為一周的第一天)
%W 2位數的一年中的星期數(星期一為一周的第一天)
%w 1位數的星期幾(星期天為一周的第一天)
%X 時間 (本地的)
%x 日期 (本地的)
%Y 4位數的年份

CustomLog "|bin/rotatelogs /var/logs/logfile 86400" common
此配置會建立檔案"/var/logs/logfile.nnnn"，其中的nnnn是名義上的日誌啟動時的系統時間(此時間總是滾動時間的倍數，可以用於cron腳本的同步)。在滾動時間到達時(在此例中是24小時以後)，會產生一個新的日誌。

CustomLog "|bin/rotatelogs /var/logs/logfile 5M" common
此配置會在日誌檔案大小增長到5兆位元組時滾動該日誌。

ErrorLog "|bin/rotatelogs /var/logs/errorlog.%Y-%m-%d-%H_%M_%S 5M"
此配置會在錯誤日誌大小增長到5兆位元組時滾動該日誌，日誌檔案名尾碼會按照如下格式創建：errorlog.YYYY-mm-dd-HH_MM_SS

ErrorLog "| /usr/local/apache/bin/rotatelogs /www/logs/www.example.com/error_%Y_%m_%d_log 86400 480"
CustomLog "| /usr/local/apache/bin/rotatelogs /www/logs/www.example.com/access_%Y_%m_%d_log 86400 480" common

CustomLog "|/usr/local/httpd/bin/rotatelogs /www/logs/www.example.com/access.%Y-%m-%d.log 86400 480" combined
			</pre></div><div class="section" title="100.2.4.5. cronolog"><div class="titlepage"><div><div><h4 class="title"><a id="idp13164416"></a>100.2.4.5. cronolog</h4></div></div></div><p>cronolog</p><pre class="screen">
cd /usr/local/src/
wget http://cronolog.org/download/cronolog-1.6.2.tar.gz
tar zxvf cronolog-1.6.2.tar.gz
cd cronolog-1.6.2
./configure --prefix=/usr/local/cronolog
make
make install
			</pre><p>CustomLog "|/usr/local/cronolog/sbin/cronolog /opt/apache/logs/access_log.%Y%m%d" combined</p></div><div class="section" title="100.2.4.6. 日誌合併"><div class="titlepage"><div><div><h4 class="title"><a id="idp13166816"></a>100.2.4.6. 日誌合併</h4></div></div></div><p>合併多個伺服器的日誌檔案（如log1、log2、log3），並輸出到log_all中的方法是：</p><pre class="screen">
 $ sort -m -t " " -k 4 -o log_all log1 log2 log3
			</pre></div><div class="section" title="100.2.4.7. 日誌歸檔"><div class="titlepage"><div><div><h4 class="title"><a id="idp13168192"></a>100.2.4.7. 日誌歸檔</h4></div></div></div><pre class="screen">
30 4 * * * /usr/bin/gzip -f /www/logs/access.`date -d yesterday +%Y-%m-%d`.log
			</pre></div><div class="section" title="100.2.4.8. logger"><div class="titlepage"><div><div><h4 class="title"><a id="idp13169136"></a>100.2.4.8. logger</h4></div></div></div><p>https://www.sit.auckland.ac.nz/Logging_to_syslog_with_Apache</p><pre class="screen">
			
Logging to syslog with Apache

First you will need to install syslog-ng. This is the logging server that will send the log data to the syslog box.

apt-get update &amp;&amp; apt-get install syslog-ng
syslog-ng uses a socket device to accept data from apache or whatever program is creating the logs.

Use the configuration here: Syslog-ng default config.

The first part indicates what the socket will be called and where it will live. The second part tells syslog-ng where to send the collected data. The restart syslog-ng (/etc/init.d/syslog-ng restart)l.

Configure apache's logging

Add these directives to send apache's logs via a socket to syslog

CustomLog "|/usr/bin/logger -s -t 'monitor.cs.auckland.ac.nz' -p info -u /var/log/apache_log.socket" Combined
ErrorLog "|/usr/bin/logger -s -t 'monitor.cs.auckland.ac.nz' -p err -u /var/log/apache_log.socket"
Apache will then use the logger program to send data to syslog. /var/log/apache_log.socket refers to the device that syslog-ng has created. Data sent to this device is sent over the network to the main syslog box.

Troubleshooting

It seems that apache 2.0.54-5 does not like logging to a file and to a process at the same time. In this case log entries will become re-ordered or missed out. You can use the test scripts below to check if this is happening.

Testing

Here are some useful scripts that can help with testing to make sure the logging is working as expected.

You can simulate http accesses using lynx with this command:

watch lynx -source http://monitor.cs.auckland.ac.nz/
Which will make a http request every two seconds. Or, for a better test:

for i in `seq 1 100`; do lynx -source http://monitor.cs.auckland.ac.nz/$i;sleep 3;done
The result of this test is a sequence of log entires from 1 to 100. If entries are missing or in the wrong order, you know there is a problem.
			
			</pre></div><div class="section" title="100.2.4.9. other"><div class="titlepage"><div><div><h4 class="title"><a id="idp13172384"></a>100.2.4.9. other</h4></div></div></div><pre class="screen">
CustomLog "|/usr/bin/your_script" Combined
ErrorLog "|/usr/bin/your_script"
			</pre></div></div><div class="section" title="100.2.5. mod_access"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.mod_access"></a>100.2.5. mod_access</h3></div></div></div><pre class="screen">
		
&lt;Directory /www&gt;
  Order Allow,Deny
&lt;/Directory&gt;

&lt;Directory /www&gt;
	Order Deny,Allow
	Deny from all
	Allow from apache.org
&lt;/Directory&gt;


&lt;Directory /www&gt;
	Order Allow,Deny
	Allow from apache.org
	Deny from foo.apache.org
&lt;/Directory&gt;
		
		</pre><pre class="screen">
A (partial) domain-name
Example: Allow from apache.org

A full IP address
Example: Allow from 10.1.2.3

A partial IP address
Example: Allow from 10.1

A network/netmask pair
Example: Allow from 10.1.0.0/255.255.0.0

A network/nnn CIDR specification
Example: Allow from 10.1.0.0/16
		</pre><pre class="screen">
		
&lt;DirectoryMatch (/usr/share/nagios3/htdocs|/usr/lib/cgi-bin/nagios3|/etc/nagios3/stylesheets)&gt;
        Options FollowSymLinks

        DirectoryIndex index.html

        AllowOverride AuthConfig
        Order Allow,Deny
        Allow From All

        AuthName "Nagios Access"
        AuthType Basic
        AuthUserFile /etc/nagios3/htpasswd.users
        # nagios 1.x:
        #AuthUserFile /etc/nagios/htpasswd.users
        require valid-user
&lt;/DirectoryMatch&gt;
		
		</pre><p>Apache httpd 2.4.x</p><pre class="screen">
		
    &lt;Directory "/www/www.example.com"&gt;
	        Options Indexes FollowSymLinks
	        AllowOverride None
	        Require all granted
    &lt;/Directory&gt;
		
		</pre></div><div class="section" title="100.2.6. VirtualHost"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.vhost"></a>100.2.6. VirtualHost</h3></div></div></div><p>conf/extra/httpd-vhosts.conf</p><p>or</p><p>/etc/httpd/conf.d/vhost.conf</p><pre class="screen">
		
NameVirtualHost *:80

&lt;VirtualHost *:80&gt;
    ServerAdmin webmaster@dummy-host.example.com
    DocumentRoot "/usr/local/httpd-2.2.14/docs/dummy-host.example.com"
    ServerName dummy-host.example.com
    ServerAlias www.dummy-host.example.com
    ErrorLog "logs/dummy-host.example.com-error_log"
    CustomLog "logs/dummy-host.example.com-access_log" common
&lt;/VirtualHost&gt;
		
		</pre><div class="section" title="100.2.6.1. ServerName/ServerAlias"><div class="titlepage"><div><div><h4 class="title"><a id="idp13180128"></a>100.2.6.1. ServerName/ServerAlias</h4></div></div></div><pre class="screen">
ServerName dummy-host.example.com
ServerAlias www.dummy-host.example.com
			</pre></div><div class="section" title="100.2.6.2. rotatelogs"><div class="titlepage"><div><div><h4 class="title"><a id="rotatelogs"></a>100.2.6.2. rotatelogs</h4></div></div></div><pre class="screen">
CustomLog "|/usr/local/httpd/bin/rotatelogs /www/logs/www.example.com/access.%Y-%m-%d.log 86400 480" combined
ErrorLog "|/usr/local/httpd/bin/rotatelogs /www/logs/www.example.com/error.%Y-%m-%d.log 86400 480"
			</pre></div></div><div class="section" title="100.2.7. Alias / AliasMatch"><div class="titlepage"><div><div><h3 class="title"><a id="idp13182736"></a>100.2.7. Alias / AliasMatch</h3></div></div></div><pre class="screen">
		
Alias /image /ftp/pub/image
AliasMatch ^/icons(.*) /usr/local/apache/icons$1
		
		</pre><pre class="screen">
		
cat /etc/httpd/conf.d/logs.conf

Alias /logs "/www/logs"

&lt;Directory "/www/logs"&gt;
   Options FollowSymLinks MultiViews Indexes
   AllowOverride None
   Order allow,deny
   Allow from all
#  Order deny,allow
#  Deny from all
#  Allow from 127.0.0.1
#   AuthName "Logs Access"
#   AuthType Basic
#   AuthUserFile /etc/httpd/htpasswd.users
#   Require valid-user
&lt;/Directory&gt;
		
		</pre></div><div class="section" title="100.2.8. Redirect / RedirectMatch"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.redirect"></a>100.2.8. Redirect / RedirectMatch</h3></div></div></div><p>Redirect</p><pre class="screen">
		
Redirect /service http://foo2.example.com/service
Redirect permanent /one http://example.com/two
Redirect 303 /three http://example.com/other
		
		</pre><p>RedirectMatch</p><pre class="screen">
RedirectMatch (.*)\.gif$ http://www.domain.com$1.jpg
		</pre><pre class="screen">
		
&lt;VirtualHost *:80&gt;
     ServerName www.old.com
     DocumentRoot /path/to/htdocs
     ......
     &lt;Directory "/path/to/htdocs"&gt;
         RedirectMatch ^/(.*)$ http://www.new.com/$1
     &lt;/Directory&gt;
&lt;/VirtualHost&gt;
		
		</pre></div><div class="section" title="100.2.9. Rewrite"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.rewrite"></a>100.2.9. Rewrite</h3></div></div></div><p>Rewrite 需要 AllowOverride All</p><pre class="screen">
		
&lt;Directory "/www"&gt;
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.2/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    #AllowOverride None
    AllowOverride All

    #
    # Controls who can get stuff from this server.
    #
    Order allow,deny
    Allow from all

&lt;/Directory&gt;
		
		</pre><div class="section" title="100.2.9.1. R=301"><div class="titlepage"><div><div><h4 class="title"><a id="idp13190352"></a>100.2.9.1. R=301</h4></div></div></div><pre class="screen">
RewriteEngine on
RewriteCond %{HTTP_HOST} ^x.x.x.x [NC]
RewriteRule ^/(.*)$ http://www.example.com/$1 [L,R=301]

			</pre><div class="example"><a id="idp13191552"></a><p class="title"><strong>例 100.3. R=301</strong></p><div class="example-contents"><pre class="screen">
				
&lt;VirtualHost *:80&gt;
	ServerAdmin webmaster@example.com
	ServerName www.example.com
	ServerAlias www.second.com

    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^www.example.com [NC]
    RewriteRule ^/(.*)$ http://www.other.com/$1 [L,R=301]
    RewriteCond %{HTTP_HOST} ^www.second.com [NC]
    RewriteRule ^/(.*)$ http://www.other.com/$1 [L,R=301]
&lt;/VirtualHost&gt;
				
				</pre></div></div><br class="example-break" /></div><div class="section" title="100.2.9.2. Rewrite + JkMount"><div class="titlepage"><div><div><h4 class="title"><a id="idp13193024"></a>100.2.9.2. Rewrite + JkMount</h4></div></div></div><p>JkMount 與 Rewrite 同時使用時</p><p>RewriteRule ^/communtiy/top/(.*)$  /community.do?method=activeContent&amp;id=$1 [PT] </p><p>後面用[PT]</p></div><div class="section" title="100.2.9.3. Apache redirect domain.com to www.domain.com"><div class="titlepage"><div><div><h4 class="title"><a id="idp13194224"></a>100.2.9.3. Apache redirect domain.com to www.domain.com</h4></div></div></div><pre class="screen">
			
$ vi .htaccess
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain\.com
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=permanent,L]
			
			</pre></div><div class="section" title="100.2.9.4. 正則匹配副檔名"><div class="titlepage"><div><div><h4 class="title"><a id="idp13195392"></a>100.2.9.4. 正則匹配副檔名</h4></div></div></div><pre class="screen">
			
&lt;VirtualHost *:80&gt;
    ServerAdmin webmaster@example.com
    DocumentRoot "/www/www.example.com/images"
    ServerName images.example.com
    RewriteEngine On
    RewriteRule ^(.+)(jpg|gif|bmp|jpeg|ico|png|css)$ http://images.other.com/$1$2 [R]
    ErrorLog "logs/images.example.com-error.log"
&lt;/VirtualHost&gt;
			
			</pre><pre class="screen">
			
&lt;VirtualHost *:80&gt;
	ServerAdmin webmaster@example.com
	ServerName images.example.com
	RewriteEngine On
	RewriteCond %{HTTP_HOST} ^images.example.com [NC]
	RewriteRule ^/(.*) http://images.other.com/$1 [L]
	CustomLog "|/usr/local/httpd/bin/rotatelogs /www/logs/images/access.%Y-%m-%d.log 100M" common
&lt;/VirtualHost&gt;
			
			</pre></div></div><div class="section" title="100.2.10. Proxy"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.proxy"></a>100.2.10. Proxy</h3></div></div></div><pre class="screen">
		
ProxyRequests Off

&lt;Proxy *&gt;
	Order deny,allow
	Allow from all
&lt;/Proxy&gt;
ProxyPass / http://your.domain.com:8080/
ProxyPassReverse / http://your.domain.com:8080/
		
		</pre><div class="section" title="100.2.10.1. Reverse proxy"><div class="titlepage"><div><div><h4 class="title"><a id="idp13198912"></a>100.2.10.1. Reverse proxy</h4></div></div></div><p>/etc/httpd/conf.d/rails.conf</p><pre class="screen">
			
Listen 8080
ProxyRequests Off
&lt;Proxy balancer://cluster&gt;
	BalancerMember http://127.0.0.1:3001
	BalancerMember http://127.0.0.1:3002
	BalancerMember http://127.0.0.1:3003
	BalancerMember http://127.0.0.1:3004
	BalancerMember http://127.0.0.1:3005
&lt;/Proxy&gt;

&lt;VirtualHost *:8080&gt;
	ServerName www.example.com:8080
	DocumentRoot /var/www/project/public
	ProxyPass /images !
	ProxyPass /stylesheets !
	ProxyPass /javascripts !
	ProxyPass / balancer://cluster/
	ProxyPassReverse / balancer://cluster/
	ProxyPreserveHost on
&lt;/VirtualHost&gt;
			
			</pre></div></div><div class="section" title="100.2.11. Deflate"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.deflate"></a>100.2.11. Deflate</h3></div></div></div><p>mod_deflate</p><p>httpd.conf中中加入下列語句：</p><pre class="screen">
			
&lt;IfModule mod_deflate.c&gt;
	SetOutputFilter DEFLATE
	DeflateCompressionLevel 9
	AddOutputFilterByType DEFLATE text/html text/plain text/xml application/x-httpd-php
	AddOutputFilter DEFLATE txt css js
	SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary
	SetEnvIfNoCase Request_URI \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
	SetEnvIfNoCase Request_URI \.pdf$ no-gzip dont-vary
	DeflateFilterNote Input input_info
	DeflateFilterNote Output output_info
	DeflateFilterNote Ratio ratio_info
	LogFormat '"%r" %{output_info}n/%{input_info}n (%{ratio_info}n%%)' deflate
	CustomLog logs/deflate_log.log deflate
&lt;/IfModule&gt;
			
			</pre><p>對目錄/usr/local/apache/htdocs有效</p><pre class="screen">
			
&lt;Directory "/usr/local/apache/htdocs"&gt;
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
	SetOutputFilter DEFLATE
	DeflateCompressionLevel 9
	AddOutputFilterByType DEFLATE text/html text/plain text/xml application/x-httpd-php
	AddOutputFilter DEFLATE txt css js
	SetEnvIfNoCase Request_URI \
	\.(?:gif|jpe?g|png)$ no-gzip dont-vary
&lt;/Directory&gt;
			
			</pre><p></p><pre class="screen">
			
&lt;Location /&gt;
	AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript
	AddOutputFilterByType DEFLATE application/javascript application/x-javascript application/x-httpd-php
	AddOutputFilter DEFLATE txt css js
	SetOutputFilter DEFLATE
&lt;/Location&gt;
			
			</pre><p>Log定義</p><pre class="screen">
DeflateFilterNote Input instream   # 未壓縮前
DeflateFilterNote Output outstream # 壓縮後
DeflateFilterNote Ratio ratio   # 百分比
LogFormat '"%r" %{outstream}n/%{instream}n (%{ratio}n%%)' deflate # 格式定義

CustomLog logs/deflate_log.log deflate # 日誌位置
CustomLog "|/usr/local/httpd/bin/rotatelogs /www/logs/deflate.%Y-%m-%d.log 86400 480" deflate # 分割日誌位置
			</pre><div class="section" title="100.2.11.1. 測試 gzip,deflate 模組"><div class="titlepage"><div><div><h4 class="title"><a id="idp13206784"></a>100.2.11.1. 測試 gzip,deflate 模組</h4></div></div></div><span class="command"><strong>telnet www.bg7nyt.cn 80</strong></span><pre class="screen">
GET /index.html HTTP/1.0
Host: www.bg7nyt.cn
Accept-Encoding: gzip,deflate
			</pre><p>你看到的是亂碼,而不是HTML.</p><pre class="screen">
curl -H Accept-Encoding:gzip,defalte http://www.example.com/index.html | gunzip
			</pre><p>gunzip 可以解壓壓縮內容</p></div></div><div class="section" title="100.2.12. Expires"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.expires"></a>100.2.12. Expires</h3></div></div></div><pre class="screen">
		
ExpiresActive On
ExpiresByType image/gif "access plus 1 month"
ExpiresByType image/jpeg "access plus 1 month"
ExpiresByType image/x-icon "access plus 1 month"
ExpiresByType image/png "access plus 1 month"
ExpiresByType text/html "access plus 30 minutes"
ExpiresByType text/css  "access plus 30 minutes"
ExpiresByType text/js   "access plus 30 minutes"
ExpiresByType application/x-javascript   "access plus 30 minutes"
ExpiresByType application/x-shockwave-flash     "access plus 30 minutes"

&lt;FilesMatch “\.(ico|jpg|jpeg|png|gif|js|css|swf|html|htm|gzip)$”&gt;
ExpiresActive on
ExpiresDefault “access plus 2 hours”
Header set Cache-Control “max-age=1800, public”
FileETag none
&lt;/FilesMatch&gt;
		
		</pre></div><div class="section" title="100.2.13. Cache"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.cache"></a>100.2.13. Cache</h3></div></div></div><p>htcacheclean -- program for cleaning the disk cache.</p><div class="section" title="100.2.13.1. mod_disk_cache"><div class="titlepage"><div><div><h4 class="title"><a id="idp13212320"></a>100.2.13.1. mod_disk_cache</h4></div></div></div><pre class="screen">
			
&lt;IfModule mod_cache.c&gt;
    CacheDefaultExpire 86400
    &lt;ifModule mod_disk_cache.c&gt;
        CacheEnable disk /
        CacheRoot /tmp/apacheCache
        CacheDirLevels 5
        CacheDirLength 5
        CacheMaxFileSize 1048576
        CacheMinFileSize 10
    &lt;/ifModule mod_disk_cache.c&gt;
&lt;/IfModule mod_cache.c&gt;
			
			</pre></div><div class="section" title="100.2.13.2. mod_mem_cache"><div class="titlepage"><div><div><h4 class="title"><a id="idp13213760"></a>100.2.13.2. mod_mem_cache</h4></div></div></div><pre class="screen">
			
&lt;IfModule mod_cache.c&gt;
    &lt;ifModule mod_mem_cache.c&gt;
        CacheEnable mem /
        MCacheMaxObjectCount 20000
        MCacheMaxObjectSize 1048576
        MCacheMaxStreamingBuffer 65536
        MCacheMinObjectSize 10
        MCacheRemovalAlgorithm GDSF
        MCacheSize 131072
    &lt;/ifModule mod_disk_cache.c&gt;
&lt;/IfModule mod_cache.c&gt;
			
			</pre></div></div><div class="section" title="100.2.14. usertrack"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.usertrack"></a>100.2.14. usertrack</h3></div></div></div><p>跟蹤用戶信息</p><p>跟蹤用戶的cookie,使用log日誌檔案記錄用戶的cookie</p><pre class="screen">
LoadModule usertrack_module modules/mod_usertrack.so

CookieTracking on
CookieDomain .example.com
CookieExpires "10 years"
CookieStyle Cookie

LogFormat "%h %l %u %t \"%r\" %&gt;s %b \"%{Referer}i\" \"%{User-Agent}i\" %{cookie}n" combined
		</pre></div><div class="section" title="100.2.15. Charset"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.charset"></a>100.2.15. Charset</h3></div></div></div><p>Default charset</p><pre class="screen">
AddCharset UTF-8 .html

AddType 'text/html; charset=UTF-8' html

AddDefaultCharset UTF-8
		</pre><p>Files match</p><pre class="screen">
		
&lt;FilesMatch "\.(htm|html|css|js)$"&gt;
	ForceType 'text/html; charset=UTF-8'
&lt;/FilesMatch&gt;

&lt;FilesMatch "\.(htm|html|css|js)$"&gt;
	AddDefaultCharset UTF-8
&lt;/FilesMatch&gt;
		
		</pre><p>Changing the occasional file</p><pre class="screen">
		
&lt;Files "example.html"&gt;
	AddCharset UTF-8 .html
&lt;/Files&gt;

&lt;Files "example.html"&gt;
	ForceType 'text/html; charset=UTF-8'
&lt;/Files&gt;
		
		</pre></div><div class="section" title="100.2.16. Dir"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.dir"></a>100.2.16. Dir</h3></div></div></div><pre class="screen">
		
&lt;IfModule dir_module&gt;
    DirectoryIndex index.html index.php
&lt;/IfModule&gt;
		
		</pre></div><div class="section" title="100.2.17. Includes"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.ssi"></a>100.2.17. Includes</h3></div></div></div><pre class="screen">
		
&lt;Directory "/www"&gt;
	Options Indexes FollowSymLinks +Includes
&lt;/Directory&gt;
		
		</pre><pre class="screen">
		
&lt;IfModule mime_module&gt;
	AddType text/html .shtml
    AddOutputFilter INCLUDES .shtml
&lt;/IfModule&gt;
		
		</pre></div><div class="section" title="100.2.18. Apache Status"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.status"></a>100.2.18. Apache Status</h3></div></div></div><p>開啟Apache的status模組，需要修改httpd.conf，增加以下配置段：</p><pre class="screen">
		
ExtendedStatus On
&lt;Location /server-status&gt;
  SetHandler server-status
  Order deny,allow
  Deny from all
  Allow from 125.76.229.113
&lt;/Location&gt;
		
		</pre><p>http://www.domain.com/server-status</p><p>Automatic Updates</p><pre class="screen">
http://your.server.name/server-status?refresh=N
		</pre><pre class="screen">
http://localhost/server-status?auto
		</pre><p>擴展狀態，提供更詳細的信息</p><pre class="screen">
ExtendedStatus On
		</pre></div><div class="section" title="100.2.19. Mod Perl"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.mod_perl"></a>100.2.19. Mod Perl</h3></div></div></div><p>ref: http://search.cpan.org/~agrundma/Catalyst-Engine-Apache-1.07/lib/Catalyst/Engine/Apache2/MP20.pm</p><span class="command"><strong>$ sudo apt-get install libapache2-mod-perl2 </strong></span><span class="command"><strong>$ sudo apt-get install libcatalyst-engine-apache-perl</strong></span><pre class="screen">
$ sudo vi /etc/apache2/sites-available/catalyst.conf
		</pre><div class="example"><a id="idp13231104"></a><p class="title"><strong>例 100.4. mod_perl.conf</strong></p><div class="example-contents"><pre class="screen">
			
PerlSwitches -I/var/www/MyApp/lib
# Preload your entire application
PerlModule MyApp

&lt;VirtualHost 192.168.245.129:80&gt;
        ServerName 192.168.245.129
        DocumentRoot /var/www/MyApp/root

        &lt;Directory /var/www/MyApp/root&gt;
	        Options Indexes FollowSymLinks
	        AllowOverride None
	        Order allow,deny
	        Allow from all
        &lt;/Directory&gt;

        # If the server is started as:
        #       httpd -X -D PERLDB
        # then debugging will be turned on
#       &lt;IfDefine PERLDB&gt;
#               PerlRequire conf/db.pl
#               &lt;Location /&gt;
#                       PerlFixupHandler Apache::DB
#               &lt;/Location&gt;
#       &lt;/IfDefine&gt;

        &lt;Location /&gt;
                SetHandler modperl
                PerlResponseHandler MyApp
        &lt;/Location&gt;

        Alias /static /var/www/MyApp/root/static
        &lt;Location /static&gt;
                SetHandler default-handler
        &lt;/Location&gt;
&lt;/VirtualHost&gt;
			
			</pre></div></div><br class="example-break" /><p>db.pl</p><pre class="screen">
		
use APR::Pool ();
use Apache::DB ();
Apache::DB-&gt;init();
		
		</pre><p>enable site</p><pre class="screen">
$ sudo a2ensite mod_perl.conf
$ sudo /etc/init.d/apache2 restart
		</pre></div><div class="section" title="100.2.20. mod_pagespeed -"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.mod_pagespeed"></a>100.2.20. mod_pagespeed - </h3></div></div></div><p><a class="ulink" href="https://developers.google.com/speed/pagespeed/mod" target="_top">https://developers.google.com/speed/pagespeed/mod</a></p></div><div class="section" title="100.2.21. Module FAQ"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.faq"></a>100.2.21. Module FAQ</h3></div></div></div><p></p><pre class="screen">
	 	
[root@srv-2 modules]# /etc/init.d/httpd start
Starting httpd: Syntax error on line 358 of /etc/httpd/conf/httpd.conf:
Invalid command 'Order', perhaps mis-spelled or defined by a module not included
in the server configuration
[FAILED]
LoadModule access_module /etc/httpd/modules/mod_access.so
LoadModule auth_module /etc/httpd/modules/mod_auth.so
[root@srv-2 modules]# /etc/init.d/httpd start
Starting httpd: Syntax error on line 368 of /etc/httpd/conf/httpd.conf:
Invalid command 'UserDir', perhaps mis-spelled or defined by a module not includ
ed in the server configuration
[FAILED]
LoadModule userdir_module /etc/httpd/modules/mod_userdir.so
[root@srv-2 modules]# /etc/init.d/httpd start
Starting httpd: Syntax error on line 396 of /etc/httpd/conf/httpd.conf:
Invalid command 'DirectoryIndex', perhaps mis-spelled or defined by a module not
included in the server configuration
[FAILED]
LoadModule dir_module /etc/httpd/modules/mod_dir.so
[root@srv-2 modules]# /etc/init.d/httpd start
Starting httpd: Syntax error on line 419 of /etc/httpd/conf/httpd.conf:
Invalid command 'TypesConfig', perhaps mis-spelled or defined by a module not in
cluded in the server configuration
[FAILED]
LoadModule mime_module /etc/httpd/modules/mod_mime.so
[root@srv-2 modules]# /etc/init.d/httpd start
Starting httpd: Syntax error on line 491 of /etc/httpd/conf/httpd.conf:
Invalid command 'LogFormat', perhaps mis-spelled or defined by a module not incl
uded in the server configuration
[FAILED]
LoadModule log_config_module /etc/httpd/modules/mod_log_config.so
[root@srv-2 modules]# /etc/init.d/httpd start
Starting httpd: Syntax error on line 555 of /etc/httpd/conf/httpd.conf:
Invalid command 'Alias', perhaps mis-spelled or defined by a module not included
in the server configuration
[FAILED]
LoadModule alias_module /etc/httpd/modules/mod_alias.so
[root@srv-2 modules]# /etc/init.d/httpd start
Starting httpd: Syntax error on line 582 of /etc/httpd/conf/httpd.conf:
Invalid command 'SetEnvIf', perhaps mis-spelled or defined by a module not inclu
ded in the server configuration
[FAILED]
LoadModule setenvif_module /etc/httpd/modules/mod_setenvif.so
[root@srv-2 modules]# /etc/init.d/httpd start
Starting httpd: Syntax error on line 636 of /etc/httpd/conf/httpd.conf:
Invalid command 'IndexOptions', perhaps mis-spelled or defined by a module not i
ncluded in the server configuration
[FAILED]
LoadModule autoindex_module /etc/httpd/modules/mod_autoindex.so
[root@srv-2 modules]# /etc/init.d/httpd start
Starting httpd: Syntax error on line 784 of /etc/httpd/conf/httpd.conf:
Invalid command 'LanguagePriority', perhaps mis-spelled or defined by a module n
ot included in the server configuration
[FAILED]
LoadModule negotiation_module /etc/httpd/modules/mod_negotiation.so
[root@srv-2 modules]# /etc/init.d/httpd start
Starting httpd:                                            [  OK  ]
[root@srv-2 modules]#
	 	
	 	</pre></div><div class="section" title="100.2.22. mod_setenvif"><div class="titlepage"><div><div><h3 class="title"><a id="httpd.mod_setenvif"></a>100.2.22. mod_setenvif</h3></div></div></div><p>屏蔽爬蟲</p><pre class="screen">
		
&lt;directory "/www/example.com"&gt;
    Order allow,deny
    Allow from all
    BrowserMatchNoCase "iaskspider" badguy
    BrowserMatchNoCase "QihooBot" badguy
    BrowserMatchNoCase "larbin" badguy
    BrowserMatchNoCase "iearthworm" badguy
    BrowserMatchNoCase "Outfoxbot" badguy
    BrowserMatchNoCase "lanshanbot" badguy
    BrowserMatchNoCase "Arthur" badguy
    BrowserMatchNoCase "InfoPath" badguy
    BrowserMatchNoCase "DigExt" badguy
    BrowserMatchNoCase "Embedded" badguy
    BrowserMatchNoCase "EmbeddedWB" badguy
    BrowserMatchNoCase "Wget" badguy
    BrowserMatchNoCase "CNCDialer" badguy
    BrowserMatchNoCase "LWP::Simple" badguy
    BrowserMatchNoCase "WPS" badguy
    deny from env=badguy
&lt;/directory&gt;
		
		</pre><p>屏蔽下載</p><pre class="screen">
BrowserMatch "NetAnt" badguy
BrowserMatch "GetRight" badguy
BrowserMatch "JetCar" badguy
BrowserMatch "Mass Downloader" badguy
BrowserMatch "ReGet" badguy
BrowserMatch "DLExpert" badguy
BrowserMatch "FlashGet" badguy
BrowserMatch "Offline Explorer" badguy
BrowserMatch "Teleport" badguy
...........

order deny,allow
deny from env=badguy
allow from all
		</pre></div><div class="section" title="100.2.23. PHP 程序安全問題 php_admin_value"><div class="titlepage"><div><div><h3 class="title"><a id="idp13243792"></a>100.2.23. PHP 程序安全問題 php_admin_value</h3></div></div></div><p>php 安全</p><pre class="screen">
		
php_admin_value open_basedir /var/www/htdocs/
		
		</pre><pre class="screen">
		
&lt;IfModule mod_php5.c&gt;
  php_value include_path ".:/usr/local/lib/php"
  php_admin_flag engine on
&lt;/IfModule&gt;
&lt;IfModule mod_php4.c&gt;
  php_value include_path ".:/usr/local/lib/php"
  php_admin_flag engine on
&lt;/IfModule&gt;
		
		</pre></div><div class="section" title="100.2.24. mod_spdy"><div class="titlepage"><div><div><h3 class="title"><a id="mod_spdy"></a>100.2.24. mod_spdy</h3></div></div></div><p>mod_spdy 是用於 Apache HTTP 伺服器的 Google SPDY 協議實現模組, </p><p>SPDY並不是一種用於替代HTTP的協議，而是對HTTP協議的增強。新協議的功能包括數據流的多路復用、請求優先順序，以及HTTP包頭壓縮。谷歌已經開發一個網絡伺服器原型機，以及支持SPDY協議的Chrome瀏覽器版本。</p><p><a class="ulink" href="https://code.google.com/p/mod-spdy/" target="_top">https://code.google.com/p/mod-spdy/</a></p></div></div><div xmlns="" id="disqus_thread"></div><script xmlns="" type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

            if(document.domain == 'netkiller.github.com'){
            var disqus_shortname = 'netkiller'; // required: replace example with your forum shortname
            }else{
			var disqus_shortname = 'neochan';
            }

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script><noscript xmlns="">Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a xmlns="" href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="lamp.html">上一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="lamp.html">上一級</a></td><td width="40%" align="right"> <a accesskey="n" href="lamp.referal.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">第 100 章 Apache httpd </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 100.3. 設置Apache實現防盜連</td></tr></table></div><script xmlns="" type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11694057-1']);
  _gaq.push(['_setDomainName', 'netkiller.github.io']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script><script xmlns="" type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F997cd4a7320a82d72cb74d179118f697' type='text/javascript'%3E%3C/script%3E"));
</script></body></html>