<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>4.3.Â minikube å‘½ä»¤</title><link rel="stylesheet" type="text/css" href="../docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><meta name="keywords" content="qmeu,kvm,xen,openvz, docker, coreos,docker-compose, kubernetes,kubeadmin,kubectl, netkiller-devops" /><link rel="home" href="../index.html" title="Netkiller Container æ‰‹æœ­" /><link rel="up" href="minikube.html" title="ç¬¬Â 4Â ç« Â Minikube" /><link rel="prev" href="minikube.Quickstart.html" title="4.2.Â Quickstart" /><link rel="next" href="ch04s04.html" title="4.4.Â Minikube æ¡ˆä¾‹æ¼”ç¤º" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> |
		<a xmlns="" href="//netkiller.github.io/">ç®€ä½“ä¸­æ–‡</a> |
	    <a xmlns="" href="http://netkiller.sourceforge.net/">ç¹ä½“ä¸­æ–‡</a> |
	    <a xmlns="" href="/journal/index.html">æ‚æ–‡</a> |
	    <a xmlns="" href="https://github.com/netkiller">Github</a> |
	    <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">çŸ¥ä¹ä¸“æ </a> |
   	    <a xmlns="" href="https://edu.51cto.com/lecturer/1703915.html">51CTOå­¦é™¢</a> |
	    <a xmlns="" href="https://edu.csdn.net/lecturer/6423">CSDNç¨‹åºå‘˜ç ”ä¿®é™¢</a> |
	    <a xmlns="" href="http://my.oschina.net/neochen/">OSChina åšå®¢</a> |
	    <a xmlns="" href="https://cloud.tencent.com/developer/column/2078">è…¾è®¯äº‘ç¤¾åŒº</a> |
	    <a xmlns="" href="https://yq.aliyun.com/u/netkiller/">é˜¿é‡Œäº‘æ –ç¤¾åŒº</a> |
	    <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> |
	    <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> |
	    <a xmlns="" href="https://www.youtube.com/user/bg7nyt/videos">Youtube</a> |
	    <a xmlns="" href="//www.netkiller.cn/home/donations.html">æ‰“èµ(Donations)</a> |
	    <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.3.Â minikube å‘½ä»¤</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="minikube.Quickstart.html">ä¸Šä¸€é¡µ</a>Â </td><th width="60%" align="center">ç¬¬Â 4Â ç« Â Minikube</th><td width="20%" align="right">Â <a accesskey="n" href="ch04s04.html">ä¸‹ä¸€é¡µ</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">çŸ¥ä¹ä¸“æ </a> ï½œ <a href="https://www.zhihu.com/club/1241768772601950208">å¤šç»´åº¦æ¶æ„</a></td><td></td><td></td><td></td><td></td></tr></table><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="minikube.command"></a>4.3.Â minikube å‘½ä»¤</h3></div></div></div>
		
		<pre class="screen">
			
[root@localhost ~]# minikube
Minikube is a CLI tool that provisions and manages single-node Kubernetes clusters optimized for development workflows.

Usage:
  minikube [command]

Available Commands:
  addons         Modify minikube's kubernetes addons
  cache          Add or delete an image from the local cache.
  completion     Outputs minikube shell completion for the given shell (bash or zsh)
  config         Modify minikube config
  dashboard      Access the kubernetes dashboard running within the minikube cluster
  delete         Deletes a local kubernetes cluster
  docker-env     Sets up docker env variables; similar to '$(docker-machine env)'
  help           Help about any command
  ip             Retrieves the IP address of the running cluster
  logs           Gets the logs of the running instance, used for debugging minikube, not user code
  mount          Mounts the specified directory into minikube
  profile        Profile sets the current minikube profile
  service        Gets the kubernetes URL(s) for the specified service in your local cluster
  ssh            Log into or run a command on a machine with SSH; similar to 'docker-machine ssh'
  ssh-key        Retrieve the ssh identity key path of the specified cluster
  start          Starts a local kubernetes cluster
  status         Gets the status of a local kubernetes cluster
  stop           Stops a running local kubernetes cluster
  tunnel         tunnel makes services of type LoadBalancer accessible on localhost
  update-check   Print current and latest version number
  update-context Verify the IP address of the running cluster in kubeconfig.
  version        Print the version of minikube

Flags:
      --alsologtostderr                  log to standard error as well as files
  -b, --bootstrapper string              The name of the cluster bootstrapper that will set up the kubernetes cluster. (default "kubeadm")
  -h, --help                             help for minikube
      --log_backtrace_at traceLocation   when logging hits line file:N, emit a stack trace (default :0)
      --log_dir string                   If non-empty, write log files in this directory
      --logtostderr                      log to standard error instead of files
  -p, --profile string                   The name of the minikube VM being used.  
                                         	This can be modified to allow for multiple minikube instances to be run independently (default "minikube")
      --stderrthreshold severity         logs at or above this threshold go to stderr (default 2)
  -v, --v Level                          log level for V logs
      --vmodule moduleSpec               comma-separated list of pattern=N settings for file-filtered logging

Use "minikube [command] --help" for more information about a command.			
			
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.ip"></a>4.3.1.Â minikube ip åœ°å€</h4></div></div></div>
			
			<pre class="screen">
			
[docker@localhost ~]$ minikube ip
192.168.58.2
			
			</pre>
			<p></p>
			<pre class="screen">
			
kubectl get nodes -o jsonpath='{.items[*].status.addresses[].address}'			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.start"></a>4.3.2.Â å¯åŠ¨ minikube</h4></div></div></div>
			
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590817184"></a>è™šæ‹Ÿæœºé©±åŠ¨</h5></div></div></div>
				
				<p>--vm-driver=none</p>
				<pre class="screen">
				
minikube start --vm-driver=none
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590814320"></a>å¼€å¯GPU</h5></div></div></div>
				
				<pre class="screen">
				
minikube start --vm-driver kvm2 --gpu				
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590813024"></a>æ—¥å¿—è¾“å‡ºçº§åˆ«</h5></div></div></div>
				
				<p>æŒ‡å®šæ—¥å¿—è¾“å‡ºçº§åˆ«</p>
				<pre class="screen">
				
minikube start --v=7			
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590811296"></a>CPU å’Œ å†…å­˜åˆ†é…</h5></div></div></div>
				
				<pre class="screen">
				
minikube start --memory 8000 --cpus 2			
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590810000"></a>æŒ‡å®š kubernetes ç‰ˆæœ¬</h5></div></div></div>
				
				<pre class="screen">
				
minikube start --memory 8000 --cpus 2 --kubernetes-version v1.6.0					
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590808688"></a>é…ç½®å¯åŠ¨é¡¹</h5></div></div></div>
				
				<pre class="screen">
				
minikube start --extra-config=apiserver.v=10 --extra-config=kubelet.max-pods=100				
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590807248"></a>æŒ‡å®š registry-mirror é•œåƒ</h5></div></div></div>
				
				<pre class="screen">
				
minikube start --registry-mirror=https://registry.docker-cn.com

minikube start --image-mirror-country=cn --registry-mirror="https://docker.mirrors.ustc.edu.cn" --insecure-registry="127.0.0.1:5000"				

minikube start --image-mirror-country=cn --registry-mirror="https://docker.mirrors.ustc.edu.cn" --insecure-registry="192.168.0.0/24"
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590805680"></a>æŒ‡å®šä¸‹è½½é•œåƒ</h5></div></div></div>
				
				<pre class="screen">
				
minikube start --image-mirror-country=cn --image-repository=registry.cn-hangzhou.aliyuncs.com/google_containers				
				
				</pre>
				<pre class="screen">
				
# ä»é˜¿é‡Œäº‘ä¸‹è½½ virtualbox é•œåƒ
minikube start --vm-driver='virtualbox' --image-mirror-country cn \
    --iso-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.9.0.iso \
    --registry-mirror=https://docker.mirrors.ustc.edu.cn

minikube start --vm-driver=virtualbox \
--image-mirror-country cn \
--registry-mirror=https://docker.mirrors.ustc.edu.cn \
--image-repository=registry.aliyuncs.com/google_containers \
--insecure-registry=192.168.0.10:5000 //è®¿é—®å®¿ä¸»æœºçš„ç§æœ‰dockerä»“åº“				
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590803344"></a>Enabling Unsafe Sysctls</h5></div></div></div>
				
				<pre class="screen">
				
minikube start --extra-config="kubelet.allowed-unsafe-sysctls=kernel.msg*,net.core.somaxconn".
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590802000"></a>ä½¿ç”¨ CRI-O å®¹æ˜“</h5></div></div></div>
				
				<pre class="screen">
				
minikube start --container-runtime=cri-o --vm-driver=none				
				
				</pre>
				<p>å¯åŠ¨æ¼”ç¤º</p>
				<pre class="screen">
				
iMac:~ neo$ minikube start --container-runtime=cri-o
ğŸ˜„  Darwin 10.13.6 ä¸Šçš„ minikube v1.15.0
ğŸ†•  Kubernetes 1.19.4 is now available. If you would like to upgrade, specify: --kubernetes-version=v1.19.4
âœ¨  æ ¹æ®ç°æœ‰çš„é…ç½®æ–‡ä»¶ä½¿ç”¨ hyperkit é©±åŠ¨ç¨‹åº
ğŸ‘  Starting control plane node minikube in cluster minikube
ğŸ”„  Restarting existing hyperkit VM for "minikube" ...
ğŸ  æ­£åœ¨ CRI-O 1.17.3 ä¸­å‡†å¤‡ Kubernetes v1.19.2â€¦
ğŸ”—  Configuring bridge CNI (Container Networking Interface) ...
ğŸ”  Verifying Kubernetes components...
ğŸŒŸ  Enabled addons: storage-provisioner, dashboard, default-storageclass
ğŸ„  Done! kubectl is now configured to use "minikube" cluster and "" namespace by default
				
				</pre>
			</div>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.stop"></a>4.3.3.Â åœæ­¢ minikube</h4></div></div></div>
			
			<pre class="screen">
			
[root@localhost ~]# minikube stop
Stopping local Kubernetes cluster...
Machine stopped.			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.docker-env"></a>4.3.4.Â Docker ç¯å¢ƒå˜é‡</h4></div></div></div>
			
			<pre class="screen">
			
neo@MacBook-Pro-Neo ~ % minikube docker-env
export DOCKER_TLS_VERIFY="1"
export DOCKER_HOST="tcp://192.168.64.3:2376"
export DOCKER_CERT_PATH="/Users/neo/.minikube/certs"
export MINIKUBE_ACTIVE_DOCKERD="minikube"

# To point your shell to minikube's docker-daemon, run:
# eval $(minikube -p minikube docker-env)			
			
			</pre>
			<p>è®¾ç½®ç¯å¢ƒå˜é‡</p>
			<pre class="screen">
			
# eval $(minikube docker-env)	
# eval $(minikube -p minikube docker-env)	
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.ssh"></a>4.3.5.Â SSH</h4></div></div></div>
			
			<pre class="screen">
			
neo@MacBook-Pro-Neo ~ % minikube ssh                                                           
                         _             _            
            _         _ ( )           ( )           
  ___ ___  (_)  ___  (_)| |/')  _   _ | |_      __  
/' _ ` _ `\| |/' _ `\| || , &lt;  ( ) ( )| '_`\  /'__`\
| ( ) ( ) || || ( ) || || |\`\ | (_) || |_) )(  ___/
(_) (_) (_)(_)(_) (_)(_)(_) (_)`\___/'(_,__/'`\____)

$ 			
			
			</pre>
		</div>

		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.cache"></a>4.3.6.Â ç¼“å­˜é•œåƒ</h4></div></div></div>
			
			<pre class="screen">
			
# cache a image into $HOME/.minikube/cache/images

$ minikube cache add ubuntu:16.04
$ minikube cache add redis:3

# list cached images
$ minikube cache list
redis:3
ubuntu:16.04

# delete cached images
$ minikube cache delete ubuntu:16.04
$ minikube cache delete $(minikube cache list)
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.delete"></a>4.3.7.Â æ¸…ç† minikube</h4></div></div></div>
			
			<pre class="screen">
			
minikube delete
rm ~/.minikube 
minikube start
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.dashboard"></a>4.3.8.Â Kubernetes æ§åˆ¶é¢æ¿</h4></div></div></div>
			
			<p>Dashboardæ˜¯åŸºäºWebçš„Kubernetesç®¡ç†ç•Œé¢ã€‚ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯åŠ¨ï¼š</p>
			<pre class="screen">
			
minikube dashboard
			
			</pre>
			<p>æŸ¥è¯¢æ§åˆ¶é¢æ¿è®¿é—®åœ°å€</p>
			<pre class="screen">
			
$ minikube dashboard --url
http://192.168.3.14:30000			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.service"></a>4.3.9.Â service</h4></div></div></div>
			
			<p>åˆ—å‡ºæ‰€æœ‰æœåŠ¡</p>
			<pre class="screen">
			
Neo-iMac:~ neo$ minikube service list
|----------------------|------------------------------------|--------------|-----|
|      NAMESPACE       |                NAME                | TARGET PORT  | URL |
|----------------------|------------------------------------|--------------|-----|
| default              | kubernetes                         | No node port |
| default              | nginx                              |           80 |     |
| ingress-nginx        | ingress-nginx-controller           | http/80      |     |
|                      |                                    | https/443    |     |
| ingress-nginx        | ingress-nginx-controller-admission | No node port |
| kube-system          | kube-dns                           | No node port |
| kubernetes-dashboard | dashboard-metrics-scraper          | No node port |
| kubernetes-dashboard | kubernetes-dashboard               | No node port |
|----------------------|------------------------------------|--------------|-----|			
			
			</pre>
			<p>æŸ¥çœ‹æŒ‡å®šæœåŠ¡</p>
			<pre class="screen">
			
Neo-iMac:~ neo$ minikube service nginx
|-----------|-------|-------------|---------------------------|
| NAMESPACE | NAME  | TARGET PORT |            URL            |
|-----------|-------|-------------|---------------------------|
| default   | nginx |          80 | http://192.168.49.2:30330 |
|-----------|-------|-------------|---------------------------|
ğŸƒ  Starting tunnel for service nginx.
|-----------|-------|-------------|------------------------|
| NAMESPACE | NAME  | TARGET PORT |          URL           |
|-----------|-------|-------------|------------------------|
| default   | nginx |             | http://127.0.0.1:55815 |
|-----------|-------|-------------|------------------------|
ğŸ‰  Opening service default/nginx in default browser...
â—  Because you are using a Docker driver on darwin, the terminal needs to be open to run it.			
			
			</pre>
			 <p>æŸ¥çœ‹æœåŠ¡çš„ç½‘å€</p>
			<pre class="screen">
			
[root@localhost ~]# minikube service hello-minikube --url
http://172.16.0.121:30436			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.logs"></a>4.3.10.Â æŸ¥çœ‹æ—¥å¿—</h4></div></div></div>
			
			<pre class="screen">
			
minikube logs -v10			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.docker-env"></a>4.3.11.Â æŸ¥çœ‹ Docker ç¯å¢ƒå˜é‡</h4></div></div></div>
			
			<p>minikube docker-env</p>
			<pre class="screen">
			
Neo-iMac:~ neo$ minikube docker-env
export DOCKER_TLS_VERIFY="1"
export DOCKER_HOST="tcp://127.0.0.1:54734"
export DOCKER_CERT_PATH="/Users/neo/.minikube/certs"
export MINIKUBE_ACTIVE_DOCKERD="minikube"

# To point your shell to minikube's docker-daemon, run:
# eval $(minikube -p minikube docker-env)
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.profile"></a>4.3.12.Â profile</h4></div></div></div>
			
			<pre class="screen">
			
minikube profile demo
minikube start -p demo --memory=8192 --cpus=6 --disk-size=50g			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.addons"></a>4.3.13.Â addons</h4></div></div></div>
			
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590776752"></a>æŸ¥çœ‹æ‰€æœ‰æ’ä»¶</h5></div></div></div>
				
				<pre class="screen">
				
iMac:registry neo$ minikube addons list
|-----------------------------|----------|--------------|
|         ADDON NAME          | PROFILE  |    STATUS    |
|-----------------------------|----------|--------------|
| ambassador                  | minikube | disabled     |
| dashboard                   | minikube | enabled âœ…   |
| default-storageclass        | minikube | enabled âœ…   |
| efk                         | minikube | disabled     |
| freshpod                    | minikube | disabled     |
| gcp-auth                    | minikube | disabled     |
| gvisor                      | minikube | disabled     |
| helm-tiller                 | minikube | disabled     |
| ingress                     | minikube | disabled     |
| ingress-dns                 | minikube | disabled     |
| istio                       | minikube | disabled     |
| istio-provisioner           | minikube | disabled     |
| kubevirt                    | minikube | disabled     |
| logviewer                   | minikube | disabled     |
| metallb                     | minikube | disabled     |
| metrics-server              | minikube | disabled     |
| nvidia-driver-installer     | minikube | disabled     |
| nvidia-gpu-device-plugin    | minikube | disabled     |
| olm                         | minikube | disabled     |
| pod-security-policy         | minikube | disabled     |
| registry                    | minikube | disabled     |
| registry-aliases            | minikube | disabled     |
| registry-creds              | minikube | disabled     |
| storage-provisioner         | minikube | enabled âœ…   |
| storage-provisioner-gluster | minikube | disabled     |
|-----------------------------|----------|--------------|				
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590774432"></a>å¯ç”¨ addons</h5></div></div></div>
				
				<pre class="screen">
				
minikube addons enable heapster
minikube addons enable ingress		
				
				</pre>
				<p>å¯ç”¨ WebUI</p>
				<pre class="screen">
				
[root@localhost ~]# minikube addons enable dashboard
dashboard was successfully enabled
[root@localhost ~]# minikube addons list | grep dashboard
- dashboard: enabled				
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590772144"></a>æŸ¥çœ‹ addons åˆ—è¡¨</h5></div></div></div>
				
				<pre class="screen">
				
[root@localhost ~]# minikube addons list
- addon-manager: enabled
- dashboard: enabled
- default-storageclass: enabled
- efk: disabled
- freshpod: disabled
- gvisor: disabled
- heapster: disabled
- ingress: disabled
- kube-dns: disabled
- metrics-server: disabled
- nvidia-driver-installer: disabled
- nvidia-gpu-device-plugin: disabled
- registry: disabled
- registry-creds: disabled
- storage-provisioner: enabled
- storage-provisioner-gluster: disabled			
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590770400"></a>dashboard</h5></div></div></div>
				
				<pre class="screen">
				
Neo-iMac:~ neo$ minikube addons enable dashboard
    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/metrics-scraper:v1.0.7
    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/dashboard:v2.3.1
ğŸ’¡  Some dashboard features require the metrics-server addon. To enable all features please run:

	minikube addons enable metrics-server	


ğŸŒŸ  The 'dashboard' addon is enabled				
				
				</pre>				
				<pre class="screen">
				
Neo-iMac:~ neo$ minikube dashboard
ğŸ¤”  Verifying dashboard health ...
ğŸš€  Launching proxy ...
ğŸ¤”  Verifying proxy health ...
ğŸ‰  Opening http://127.0.0.1:62433/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/ in your default browser...				
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590767920"></a>å¼€å¯ registry ç§æœ‰åº“</h5></div></div></div>
				
				<pre class="screen">
		
# enable the registry addon
$ minikube addons enable registry

$ minikube start

# use the minikube docker daemon from the host
$ eval $(minikube docker-env)

# get the ip of the registry endpoint
$ kubectl -n kube-system get svc registry -o jsonpath="{.spec.clusterIP}"
10.0.0.240	
		
				</pre>
				<pre class="screen">
		
{
  "insecure-registries" : ["10.0.0.240"]
}		
		
				</pre>

				<p></p>
				<pre class="screen">
		
$ minikube ssh
$ docker pull busybox
$ docker tag busybox 10.0.0.240/busybox

# or

# build and push to insecure registry
$ docker build -t 10.0.0.240/busybox .
$ docker push 10.0.0.240/busybox
		
				</pre>
				
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="idm284590764768"></a>å¯ç”¨ ingress</h5></div></div></div>
				
				<pre class="screen">
				
Neo-iMac:~ neo$ minikube addons enable ingress
ğŸ’¡  After the addon is enabled, please run "minikube tunnel" and your ingress resources would be available at "127.0.0.1"
    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/kube-webhook-certgen:v1.1.1
    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/kube-webhook-certgen:v1.1.1
    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/nginx-ingress-controller:v1.0.4
ğŸ”  Verifying ingress addon...
ğŸŒŸ  The 'ingress' addon is enabled				
				
				</pre>
				<p>è¿è¡Œä¸€ä¸ªç®€å•çš„demo</p>
				<pre class="screen">
				
è¿è¡Œ nginx æœåŠ¡
kubectl run nginx --image=nginx --port=80
æš´éœ²æœåŠ¡
kubectl expose deployment nginx --port=80 --target-port=80

åˆ›å»ºingress
yaml å®šä¹‰ ingress.yaml

apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: nginx
spec:
  rules:
  - host: www.netkiller.cn
    http:
      paths:
      - path: /
        backend:
          serviceName: nginx
          servicePort: 80

è¿è¡Œ 
kubectl apply -f ingress.yaml

é…ç½®æœ¬æœºhostè·å–minikube ip 
 
[docker@localhost ~]$ minikube ip
192.168.58.2

é…ç½® /etc/hosts æ–‡ä»¶ 
192.168.58.2 www.netkiller.cn			
				
				</pre>
				<p>è®¿é—® http://www.netkiller.cn</p>
			</div>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.ssh"></a>4.3.14.Â SSH</h4></div></div></div>
			
			<p>--vm-driver=none ä¸æ”¯æŒ ssh</p>
			<pre class="screen">
			
[root@localhost ~]# minikube ssh
'none' driver does not support 'minikube ssh' command			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.ip"></a>4.3.15.Â æŸ¥çœ‹IPåœ°å€</h4></div></div></div>
			
			<pre class="screen">
			
[root@localhost ~]# minikube ip
172.16.0.121			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.image"></a>4.3.16.Â é•œåƒç®¡ç†</h4></div></div></div>
			
			<pre class="screen">
			
neo@MacBook-Pro-Neo ~ % minikube image ls
registry.cn-hangzhou.aliyuncs.com/google_containers/storage-provisioner:v5
registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.2
registry.cn-hangzhou.aliyuncs.com/google_containers/metrics-scraper:v1.0.4
registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.20.7
registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.20.7
registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.20.7
registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.20.7
registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.13-0
registry.cn-hangzhou.aliyuncs.com/google_containers/dashboard:v2.1.0
registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:1.7.0
docker.io/netkiller/flask:latest			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="minikube.kubectl"></a>4.3.17.Â kubectl</h4></div></div></div>
			
			<pre class="screen">
			
neo@MacBook-Pro-Neo ~ % minikube kubectl -- get pods -A
    &gt; kubectl.sha256: 64 B / 64 B [--------------------------] 100.00% ? p/s 0s
    &gt; kubectl: 44.08 MiB / 44.08 MiB [--------------] 100.00% 5.30 MiB p/s 8.5s
NAMESPACE       NAME                                        READY   STATUS              RESTARTS   AGE
ingress-nginx   ingress-nginx-admission-create-vzk2b        0/1     ImagePullBackOff    0          118d
ingress-nginx   ingress-nginx-admission-patch-65b85         0/1     ImagePullBackOff    0          118d
ingress-nginx   ingress-nginx-controller-7f79776f95-ncqkn   0/1     ContainerCreating   0          118d
kube-system     coredns-54d67798b7-cnjgw                    1/1     Running             2          121d
kube-system     etcd-minikube                               1/1     Running             2          121d
kube-system     kube-apiserver-minikube                     1/1     Running             2          121d
kube-system     kube-controller-manager-minikube            1/1     Running             2          121d
kube-system     kube-proxy-tr8fd                            1/1     Running             2          121d
kube-system     kube-scheduler-minikube                     1/1     Running             2          121d
kube-system     storage-provisioner                         1/1     Running             2          121d			
			
			</pre>
		</div>
	</div><div xmlns="" id="SOHUCS"></div><script xmlns="" charset="utf-8" type="text/javascript" src="https://cy-cdn.kuaizhan.com/upload/changyan.js"></script><script xmlns="" type="text/javascript">
window.changyan.api.config({
appid: 'cyvwjQUG3',
conf: 'prod_ef966242df3d8b5acb1e0ee9fc01cafe'
});
</script><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="minikube.Quickstart.html">ä¸Šä¸€é¡µ</a>Â </td><td width="20%" align="center"><a accesskey="u" href="minikube.html">ä¸Šä¸€çº§</a></td><td width="40%" align="right">Â <a accesskey="n" href="ch04s04.html">ä¸‹ä¸€é¡µ</a></td></tr><tr><td width="40%" align="left" valign="top">4.2.Â QuickstartÂ </td><td width="20%" align="center"><a accesskey="h" href="../index.html">èµ·å§‹é¡µ</a></td><td width="40%" align="right" valign="top">Â 4.4.Â Minikube æ¡ˆä¾‹æ¼”ç¤º</td></tr></table></div><script xmlns="">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-11694057-1', 'auto');
  ga('send', 'pageview');

</script><script xmlns="" async="async">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script xmlns="" async="async">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script></body></html>