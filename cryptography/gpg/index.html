<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 6. OpenPGP/OpenGPG(GnuPG)</title><link rel="stylesheet" type="text/css" href="..//docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><meta name="keywords" content="md5sum, openssl, openpgp, opengpg, md5, sha1, des, rsa, uuid, base64, quoted-printable, uuencode, x509,smime" /><link rel="home" href="../index.html" title="Netkiller Cryptography 手札" /><link rel="up" href="../index.html" title="Netkiller Cryptography 手札" /><link rel="prev" href="../aes/aes.php.html" title="5.2. PHP" /><link rel="next" href="GnuPG4Windows.html" title="6.2. GnuPG For Windows" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> |
		<a xmlns="" href="//netkiller.github.io/">简体中文</a> |
	    <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> |
	    <a xmlns="" href="/journal/index.html">杂文</a> |
	    <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> |
	    <a xmlns="" href="http://netkiller-github-com.iteye.com/">ITEYE 博客</a> |
	    <a xmlns="" href="http://my.oschina.net/neochen/">OSChina 博客</a> |
	    <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> |
	    <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> |
	    <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> |
	    <a xmlns="" href="/search.html">Search</a> |
		<a xmlns="" href="mailto:netkiller@msn.com">Email</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 6. OpenPGP/OpenGPG(GnuPG)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../aes/aes.php.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="GnuPG4Windows.html">Next</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td></tr></table><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="index"></a>Chapter 6. OpenPGP/OpenGPG(GnuPG)</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="section"><a href="index.html#GnuPG">6.1. GnuPG</a></span></dt><dd><dl><dt><span class="section"><a href="index.html#idp19">6.1.1. Creating a key (创建key) </a></span></dt><dt><span class="section"><a href="index.html#idp20">6.1.2. --list-keys 列出已存在的证书</a></span></dt><dt><span class="section"><a href="index.html#idp23">6.1.3. Exporting keys (导出key)</a></span></dt><dd><dl><dt><span class="section"><a href="index.html#idp21">6.1.3.1. --export                  export keys</a></span></dt><dt><span class="section"><a href="index.html#idp22">6.1.3.2. -o, --output                  use as output file</a></span></dt></dl></dd><dt><span class="section"><a href="index.html#idp24">6.1.4. Importing keys (导入key)</a></span></dt><dt><span class="section"><a href="index.html#idp25">6.1.5. Revoke a key (吊销key)</a></span></dt></dl></dd><dt><span class="section"><a href="GnuPG4Windows.html">6.2. GnuPG For Windows</a></span></dt><dd><dl><dt><span class="section"><a href="GnuPG4Windows.html#idp26">6.2.1. 生成密钥对</a></span></dt><dt><span class="section"><a href="GnuPG4Windows.html#idp27">6.2.2. 列出密钥</a></span></dt><dt><span class="section"><a href="GnuPG4Windows.html#idp28">6.2.3. 验证签字</a></span></dt></dl></dd><dt><span class="section"><a href="gpg4win.html">6.3. EMail-Security</a></span></dt><dt><span class="section"><a href="smartcard.html">6.4. Smart Card</a></span></dt><dt><span class="section"><a href="gpg.example.html">6.5. 例子</a></span></dt><dd><dl><dt><span class="section"><a href="gpg.example.html#idp29">6.5.1. 加密文件</a></span></dt></dl></dd></dl></div>
	
	<p>下载PGP: http://www.pgp.com/</p>
	<p>下载OpenPGP: http://www.pgpi.org/</p>
	<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="GnuPG"></a>6.1. GnuPG</h2></div></div></div>
		
		<p>GnuPG</p>
		<pre class="screen">
~/.gnupg/gpg.conf 	 – 配置文件
~/.gnupg/trustdb.gpg – 信任库
~/.gnupg/pubring.gpg – 公钥库
~/.gnupg/secring.gpg – 私钥库
		</pre>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp19"></a>6.1.1. Creating a key (创建key) </h3></div><div><h4 class="subtitle">--gen-key                 generate a new key pair</h4></div></div></div>
			
			
			<pre class="screen">
			
neo@neo-laptop:~$ gpg --gen-key
gpg (GnuPG) 1.4.11; Copyright (C) 2010 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
Your selection?
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048)
Requested keysize is 2048 bits
Please specify how long the key should be valid.
         0 = key does not expire
      &lt;n&gt;  = key expires in n days
      &lt;n&gt;w = key expires in n weeks
      &lt;n&gt;m = key expires in n months
      &lt;n&gt;y = key expires in n years
Key is valid for? (0) 1y
Key expires at Tuesday, October 22, 2013 PM03:25:35 HKT
Is this correct? (y/N) y

You need a user ID to identify your key; the software constructs the user ID
from the Real Name, Comment and Email Address in this form:
    "Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;"

Real name: Neo Chan
Email address: 324@example.com
Comment: Office Email
You selected this USER-ID:
    "Neo Chan (Office Email) &lt;324@example.com&gt;"

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O
You need a Passphrase to protect your secret key.

We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.

Not enough random bytes available.  Please do some other work to give
the OS a chance to collect more entropy! (Need 282 more bytes)
.......+++++
.......+++++
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
..+++++
..+++++
gpg: key CEF09301 marked as ultimately trusted
public and secret key created and signed.

gpg: checking the trustdb
gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model
gpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u
gpg: next trustdb check due at 2013-10-22
pub   2048R/CEF09301 2012-10-22 [expires: 2013-10-22]
      Key fingerprint = C5B7 50EF 762F 3F7F 1AE5  8AEC AF10 D50D CEF0 9301
uid                  Neo Chan (Office Email) &lt;324@example.com&gt;
sub   2048R/0BF4D523 2012-10-22 [expires: 2013-10-22]
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp20"></a>6.1.2. --list-keys 列出已存在的证书</h3></div></div></div>
			
			<pre class="screen">
			
$ gpg --list-keys
/home/neo/.gnupg/pubring.gpg
----------------------------
pub   1024R/63268A35 2013-09-11
uid                  Neo Chen (netkiller) &lt;netkiller@msn.com&gt;
sub   1024R/F4F946F9 2013-09-11
				
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp23"></a>6.1.3. Exporting keys (导出key)</h3></div></div></div>
			
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp21"></a>6.1.3.1. --export                  export keys</h4></div></div></div>
				
				<p></p>
				<pre class="screen">
				
gpg --export -a
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp22"></a>6.1.3.2. -o, --output                  use as output file</h4></div></div></div>
				
				<pre class="screen">
				
$ gpg --export -a -o test.asc
$ gpg --output yourname.asc --export -a
				
				</pre>
			</div>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp24"></a>6.1.4. Importing keys (导入key)</h3></div><div><h4 class="subtitle">--import                  import/merge keys</h4></div></div></div>
			
			
			<p></p>
			<pre class="screen">
			
neo@neo-laptop:~$ gpg --import 409.asc
gpg: key 4D3A0803: public key "Phoenix.L &lt;409@example.com&gt;" imported
gpg: key CEF09301: "Neo Chan (Office Email) &lt;324@example.com&gt;" not changed
gpg: Total number processed: 2
gpg:               imported: 1  (RSA: 1)
gpg:              unchanged: 1

			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp25"></a>6.1.5. Revoke a key (吊销key)</h3></div></div></div>
			
			<pre class="screen">
			
gpg --gen-revoke
			
			</pre>
		</div>
	</div>

	
	
	
	
</div><div xmlns="" id="disqus_thread"></div><script xmlns="">

var disqus_config = function () {
this.page.url = "http://www.netkiller.cn";  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = 'netkiller'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//netkiller.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script><noscript xmlns="">Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><br xmlns="" /><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="../aes/aes.php.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="GnuPG4Windows.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">5.2. PHP </td><td width="20%" align="center"><a accesskey="h" href="../index.html">Home</a></td><td width="40%" align="right" valign="top"> 6.2. GnuPG For Windows</td></tr></table></div><script xmlns="">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-11694057-1', 'auto');
  ga('send', 'pageview');

</script><script xmlns="" async="async">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script xmlns="" async="async">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script><script xmlns="" type="text/javascript" src="/js/q.js" async="async"></script></body></html>